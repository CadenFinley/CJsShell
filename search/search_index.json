{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#cjs-shell","title":"CJ's Shell","text":""},{"location":"#introduction","title":"Introduction","text":"<p>CJ's Shell (cjsh) pairs POSIX Shell Scripting with modern interactive tooling. Built in are a POSIX shell interpreter with bash extensions, customizable keybindings, syntax highlighting, fuzzy completions, smart directory navigation, advanced history search, multiline editing, spell correction, typeahead, rich prompts, and inline BBCode-style theming handled directly inside <code>PS1</code>/<code>RPS1</code>. Everything ships in one binary with a single vendored dependency, so cjsh works out of the box on all *nix-like systems and Windows via WSL. cjsh delivers a POSIX+ experience, standard scripting semantics with an enhanced interactive layer you can dial up or down as needed.</p> <p>The core scripting engine targets roughly 95% POSIX coverage, validated by 1500+ standards-focused tests, while the interactive layer intentionally stretches beyond POSIX through configurable POSIX+ features.</p>"},{"location":"#why-did-i-make-cjsh","title":"Why did I make cjsh?","text":"<p>Truly it was out of spite and annoyance, like all passion projects. I got so tired of all of these different prompt tools, frameworks, different shells entirely. Many of which were non POSIX compliant which basically made them useless for me. I found that no matter what combination of prompt tools, frameworks with different shells on top of having a bunch of rust rewrites of coreutils that it made the shell I was using so bloated, slow, and SO annoying to configure and setup on new machines or if I wanted to add a new tool all the while I felt like these tools could just be so much better. Which is exactly when I said \"I bet I could do this so much better.\" So I did. I set out to basically make bash + zoxide + eza + starship/ohmyposh/p10k + tab completions + auto completions + spell corrections + themes + custom keybindings + syntax highlighting + full multiline editing suite while keeping the scripting surface familiar. Oh and did I mention cjsh only uses one external library which is baked into cjsh itself. Yep, I did all of that. It has taken me a little over a year of on and off work, but I am super proud of where cjsh stands and I am continuing to make constant improvements and additions. It just works.</p>"},{"location":"#why-posix","title":"Why POSIX?","text":"<p>I chose to make cjsh POSIX-based so that it is actually usable in normal and basic terminal interactions and so that it will act and respond the way users expect. Instead of requiring people to learn a proprietary shell language, cjsh uses the basic sh scripting language plus some bash syntax for added functionality. I found that many shell scripts on Stack Overflow or Google for installations, build tools, and other various commands that users would need to run are all in sh. Using these commands in many other shells and they would simply not work or not work as intended and cause unforeseen issues. I did not want any of that. I wanted users to be able to switch over and not notice any difference when it came to interacting with scripting. I also found that I could keep the script engine standards-aligned while layering rich, optional interactive features on top, such as custom <code>cd</code> or <code>ls</code> implementations.</p>"},{"location":"#why-use-cjsh","title":"Why use cjsh?","text":"<p>cjsh was designed to just work. No need for shell frameworks, plugin managers, or hand-curated completion scripts. Prompts and visuals are defined directly in your configuration files by editing <code>PS1</code>, <code>RPS1</code>, or <code>PROMPT_COMMAND</code> with the BBCode markup described in Prompt Markup and Styling, so there is no separate theme DSL to learn or ship. <code>cjshopt style_def</code> and the prompt cleanup toggles let you dial visuals in precisely, while every interactive feature\u2014keybinds, completions, syntax highlighting, hints, and more\u2014can be customized from the same place.</p>"},{"location":"getting-started/development/","title":"Want to help?","text":""},{"location":"getting-started/development/#want-to-help","title":"Want to help?","text":"<p>cjsh is in active development and pull requests and issue posts are always appreciated!</p> <p>To get started follow the steps in quick start to clone the master branch! Thanks!</p> <p>Please refer to CONTRIBUTING.md in the root of the repo for more in depth details about code format, style, and verification.</p>"},{"location":"getting-started/development/#testing","title":"Testing","text":"<p>cjsh has a very strict test suite, when going through it you will be able to see that each test script complies to a strict standard. When writing new tests for features you are implementing, please follow this format. </p> <p>The main test harness can be run like this: </p><pre><code>    ./tests/run_shell_tests.sh\n</code></pre><p></p> <p>Please be sure to have a freshly compiled cjsh in the build directory before running. Also the test suite cannot be run inside or with another cjsh instance running on the same machine.</p> <p>To produce a clean build of cjsh run: </p><pre><code>    cmake -S . -B build -DCMAKE_BUILD_TYPE=Release\n    cmake --build build --config Release --parallel --clean-first\n</code></pre><p></p>"},{"location":"getting-started/development/#themes","title":"Themes","text":"<p>I love prompt experiments, the more the merrier! If you have a BBCode-marked prompt, <code>PS1</code>/<code>RPS1</code> template, or <code>cjshopt style_def</code> palette you would like to share, please do so by opening a PR that adds it to the documentation or sample configs. There is no external theme DSL anymore, so everything lives in plain shell script\u2014see the Prompt Markup and Styling guide for the knobs you can use.</p>"},{"location":"getting-started/development/#documentation","title":"Documentation","text":"<p>Please. Anything helps.</p>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":""},{"location":"getting-started/quick-start/#quick-start","title":"Quick Start","text":"<p>This guide gets you running cjsh, a POSIX-based interactive shell with integrated modern features, as quickly as possible.</p>"},{"location":"getting-started/quick-start/#prerequisites","title":"Prerequisites","text":"<p>A standard C/C++ Compiler:</p> <ul> <li>GCC</li> <li>clang</li> </ul> <p>And CMake 3.25 or newer.</p> <p>And that is it! cjsh has no external dependencies and was designed like this for pure simplicity. To just work where ever.</p>"},{"location":"getting-started/quick-start/#installation","title":"Installation","text":"<p>cjsh can be downloaded or built in multiple different ways.</p>"},{"location":"getting-started/quick-start/#as-a-package","title":"As a package","text":"<p>cjsh is available through multiple package managers:</p>"},{"location":"getting-started/quick-start/#homebrew-macoslinux","title":"Homebrew (macOS/Linux)","text":"<pre><code>    brew tap CadenFinley/tap\n    brew install cjsh\n</code></pre>"},{"location":"getting-started/quick-start/#arch-linux-aur","title":"Arch Linux (AUR)","text":"<pre><code>    # Using yay\n    yay -S cjsh\n\n    # Using paru\n    paru -S cjsh\n\n    # Or manually\n    git clone https://aur.archlinux.org/cjsh.git\n    cd cjsh\n    makepkg -si\n</code></pre> <p>Hopefully more package managers to come as cjsh gets bigger.</p>"},{"location":"getting-started/quick-start/#manual-building-and-installation","title":"Manual building and installation","text":"<p>cjsh is super easy to download and install. Everything is hosted on the github repo at: <code>https://github.com/CadenFinley/CJsShell</code> </p> <p>The master branch holds the most recent commits and may not always be stable and may have breaking changes with no backwards compatibility. For the most stable release, stick to using the latest tagged release from the public GitHub releases.</p> <p>cjsh is still in active, rapid development so even the latest release can still have breaking changes with no backwards compatibilities, although they will always be noted in the release if they exist.</p> <pre><code>    # First clone the repo\n    git clone https://github.com/CadenFinley/CJsShell &amp;&amp; cd CJsShell\n\n    # Configure a Release build (outputs to ./build)\n    cmake -S . -B build -DCMAKE_BUILD_TYPE=Release\n\n    # Compile using all available cores\n    cmake --build build --config Release --parallel\n</code></pre> <p>After building, the <code>cjsh</code> executable will be in the <code>build/</code> directory. You can run it directly with <code>./build/cjsh</code></p>"},{"location":"getting-started/quick-start/#build-info","title":"Build info","text":"<p>By default the commands above produce an optimized Release build.</p> <ul> <li>Pass <code>-DCMAKE_BUILD_TYPE=Debug</code> to build with sanitizers and full debug info.</li> <li>Pass <code>-DCJSH_MINIMAL_BUILD=ON</code> for the ultra-small binary profile.</li> <li><code>cmake --build build --target clean</code> removes the build artifacts.</li> <li>Disable compile database emission with <code>-DCJSH_GENERATE_COMPILE_COMMANDS=OFF</code> if your tooling does not need it.</li> <li>Install the binary anywhere with <code>cmake --install build --config Release --prefix ~/.local</code> (adjust the prefix as desired).</li> <li>Export <code>CJSH_STRIP_BINARY=0</code> before configuring to keep symbols in non-Debug builds.</li> </ul> <p>As before, git revision information is embedded automatically; use <code>CJSH_GIT_HASH_OVERRIDE</code> if you need to pin a custom value.</p>"},{"location":"getting-started/quick-start/#next-steps","title":"Next Steps","text":"<p>Now that you have cjsh installed, run <code>cjsh --help</code> to review invocation flags, type <code>help</code> inside the shell for the built-in quick reference, and check out What You Need to Know to learn about all the powerful features available out of the box and how to configure them to suit your workflow.</p>"},{"location":"getting-started/what-to-know/","title":"What You Need to Know","text":""},{"location":"getting-started/what-to-know/#what-you-need-to-know","title":"What You Need to Know","text":"<p>Welcome to CJ's Shell (cjsh)! This guide highlights the interactive features that ship enabled by default and explains how to tailor them to your workflow.</p>"},{"location":"getting-started/what-to-know/#visual-interface-features","title":"Visual &amp; Interface Features","text":""},{"location":"getting-started/what-to-know/#prompt-styling-themes","title":"Prompt Styling &amp; Themes","text":"<p>Status: Enabled Configure: Edit <code>PS1</code>, <code>RPS1</code>, <code>PS2</code>, and <code>PROMPT_COMMAND</code> directly in your config using the BBCode-style markup described in Prompt Markup and Styling. Use <code>cjshopt style_def &lt;token_type&gt; &lt;style&gt;</code> to redefine highlight palettes that are shared between syntax highlighting and prompt tags. Disable: Start cjsh with <code>--minimal</code> (turns off prompt themes/colors, completions, syntax highlighting, smart <code>cd</code>, rc sourcing, the title line, history expansion, multiline line numbers, and auto-indentation), or disable smart cd directly with <code>cjsh --no-smart-cd</code> / <code>cjshopt smart-cd off</code>.</p> <p>All prompt styling now lives inside your dotfiles\u2014no external theme DSL or bundled theme directory is required. Share a prompt by exporting new variables or sourcing a file that sets them, just like any other shell configuration.</p>"},{"location":"getting-started/what-to-know/#true-color-support","title":"True Color Support","text":"<p>Status: Enabled when the terminal advertises 24-bit color. Configure: Automatically detected; adjust styling through your prompt definitions or <code>cjshopt style_def</code>. Disable: Launch with <code>cjsh --no-colors</code> or persist by adding <code>cjshopt login-startup-arg --no-colors</code> to <code>~/.cjprofile</code>.</p>"},{"location":"getting-started/what-to-know/#prompt-cleanup-layout","title":"Prompt Cleanup &amp; Layout","text":"<p>Status: <code>prompt-cleanup</code>, <code>prompt-cleanup-newline</code>, <code>prompt-cleanup-empty-line</code>, and <code>prompt-cleanup-truncate</code> default to off so prompts stay exactly as rendered; <code>prompt-newline</code> is also off by default. Configure:</p> <pre><code>cjshopt prompt-cleanup on|off|status\ncjshopt prompt-cleanup-newline on|off|status\ncjshopt prompt-cleanup-empty-line on|off|status\ncjshopt prompt-cleanup-truncate on|off|status\ncjshopt prompt-newline on|off|status\n</code></pre> <p>These toggles control whether the previous prompt is erased, whether spacer lines are inserted before or after cleanup, and whether multiline prompts collapse to a single line once a command runs. Enable them to keep transcripts compact; leave them off for a literal transcription of your prompts.</p>"},{"location":"getting-started/what-to-know/#syntax-highlighting","title":"Syntax Highlighting","text":"<p>Status: Enabled Configure: Change token styles with <code>cjshopt style_def &lt;token_type&gt; &lt;style&gt;</code>. Disable: Start cjsh with <code>--no-syntax-highlighting</code> or add <code>cjshopt login-startup-arg --no-syntax-highlighting</code> inside <code>~/.cjprofile</code>.</p>"},{"location":"getting-started/what-to-know/#completion-line-editing","title":"Completion &amp; Line Editing","text":""},{"location":"getting-started/what-to-know/#fuzzy-completions","title":"Fuzzy Completions","text":"<p>Status: Enabled (always on) Fuzzy matching powers command, path, and argument completions without additional configuration.</p>"},{"location":"getting-started/what-to-know/#completion-preview","title":"Completion Preview","text":"<p>Status: Enabled Configure: <code>cjshopt completion-preview on|off|status</code></p>"},{"location":"getting-started/what-to-know/#spell-correction","title":"Spell Correction","text":"<p>Status: Enabled Configure: <code>cjshopt completion-spell on|off|status</code></p>"},{"location":"getting-started/what-to-know/#completion-case-sensitivity","title":"Completion Case Sensitivity","text":"<p>Status: Disabled (completions are case-insensitive) Configure: <code>cjshopt completion-case on|off|status</code></p>"},{"location":"getting-started/what-to-know/#auto-tab-expansion","title":"Auto-Tab Expansion","text":"<p>Status: Disabled Configure: <code>cjshopt auto-tab on|off|status</code> (auto-inserts a completion when the match is unique)</p>"},{"location":"getting-started/what-to-know/#smart-cd","title":"Smart cd","text":"<p>Status: Enabled Configure: <code>cjshopt smart-cd on|off|status</code> Disable: Launch with <code>cjsh --no-smart-cd</code> or add <code>cjshopt login-startup-arg --no-smart-cd</code> to <code>~/.cjprofile</code>.</p>"},{"location":"getting-started/what-to-know/#inline-hints-delay","title":"Inline Hints &amp; Delay","text":"<p>Status: Enabled Configure:</p> <pre><code>cjshopt hint on|off|status\ncjshopt hint-delay &lt;milliseconds|status&gt;\n</code></pre>"},{"location":"getting-started/what-to-know/#inline-help-prompts","title":"Inline Help Prompts","text":"<p>Status: Enabled Configure: <code>cjshopt inline-help on|off|status</code></p>"},{"location":"getting-started/what-to-know/#status-hint-banner","title":"Status Hint Banner","text":"<p>Status: <code>normal</code> (only shows when both the buffer and status line are empty) Configure: <code>cjshopt status-hints &lt;off|normal|transient|persistent|status&gt;</code></p>"},{"location":"getting-started/what-to-know/#status-line-visibility","title":"Status Line Visibility","text":"<p>Status: Enabled Configure: <code>cjshopt status-line on|off|status</code> (turn it off to hide both syntax feedback and the hint banner entirely)</p>"},{"location":"getting-started/what-to-know/#status-reporting","title":"Status Reporting","text":"<p>Status: Enabled Configure: <code>cjshopt status-reporting on|off|status</code> (leave the status line visible but mute cjsh\u2019s validation/error summaries)</p>"},{"location":"getting-started/what-to-know/#visible-whitespace-markers","title":"Visible Whitespace Markers","text":"<p>Status: Disabled Configure: <code>cjshopt visible-whitespace on|off|status</code></p>"},{"location":"getting-started/what-to-know/#multiline-editing","title":"Multiline Editing","text":"<p>Status: Enabled Configure:</p> <pre><code>cjshopt multiline on|off|status\ncjshopt multiline-indent on|off|status\ncjshopt multiline-start-lines &lt;count|status&gt;\ncjshopt line-numbers &lt;absolute|relative|off|status&gt;\ncjshopt current-line-number-highlight on|off|status\n</code></pre>"},{"location":"getting-started/what-to-know/#navigation-features","title":"Navigation Features","text":""},{"location":"getting-started/what-to-know/#smart-cd_1","title":"Smart <code>cd</code>","text":"<p>Status: Enabled Smart <code>cd</code> adds fuzzy directory matching for quick navigation between directories.</p>"},{"location":"getting-started/what-to-know/#directory-listings","title":"Directory Listings","text":"<p>cjsh leaves directory listing behavior up to your configuration. Add an <code>ls</code> wrapper, hook, or alias in <code>~/.cjshrc</code> if you prefer automatic listings after <code>cd</code>.</p>"},{"location":"getting-started/what-to-know/#history-features","title":"History Features","text":"<ul> <li>History expansions: Enabled in interactive sessions (<code>!!</code>, <code>!$</code>, etc.). Disable with <code>cjsh --no-history-expansion</code> or persist by adding <code>cjshopt login-startup-arg --no-history-expansion</code> to <code>~/.cjprofile</code>.</li> <li>Reverse search: Press <code>Ctrl+R</code> for the fuzzy history search menu (use <code>Alt+C</code> inside it to toggle case sensitivity).</li> <li>History search case sensitivity: Matching is case-sensitive by default; adjust with <code>cjshopt history-search-case on|off|status</code> to set the default for every session.</li> <li>Persistence: History entries are appended to <code>~/.cache/cjsh/history.txt</code>; duplicate commands are suppressed by default.</li> <li>Retention: Adjust limits with <code>cjshopt set-history-max &lt;number|default|status&gt;</code> (any non-negative value; default 1000 entries).</li> </ul>"},{"location":"getting-started/what-to-know/#configuration-compatibility","title":"Configuration &amp; Compatibility","text":""},{"location":"getting-started/what-to-know/#startup-files","title":"Startup Files","text":"<ul> <li><code>~/.cjprofile</code> \u2013 Executed for login shells before interactive setup.</li> <li><code>~/.cjshrc</code> \u2013 Interactive configuration (aliases, prompt definitions, hooks, etc.).</li> <li><code>~/.cjsh_logout</code> \u2013 Optional cleanup script sourced on exit.</li> </ul>"},{"location":"getting-started/what-to-know/#persisting-startup-flags","title":"Persisting Startup Flags","text":"<p><code>cjshopt login-startup-arg</code> is only valid while configuration files are being sourced. Call it once per flag inside <code>~/.cjprofile</code>:</p> <pre><code># ~/.cjprofile\ncjshopt login-startup-arg --no-colors\ncjshopt login-startup-arg --show-startup-time\n</code></pre> <p>Supported flags: <code>--login</code>, <code>--interactive</code>, <code>--posix</code>, <code>--no-colors</code>, <code>--no-titleline</code>, <code>--show-startup-time</code>, <code>--no-source</code>, <code>--no-completions</code>, <code>--no-completion-learning</code>, <code>--no-smart-cd</code>, <code>--no-script-extension-interpreter</code>, <code>--no-syntax-highlighting</code>, <code>--no-history-expansion</code>, <code>--no-sh-warning</code>, <code>--minimal</code>, <code>--secure</code>, and <code>--startup-test</code>.</p>"},{"location":"getting-started/what-to-know/#posix-bash-compatibility","title":"POSIX &amp; Bash Compatibility","text":"<p>cjsh targets high POSIX coverage for scripting while providing POSIX+ extensions such as <code>[[ ... ]]</code>, brace expansion, here-strings, process substitution, and rich redirection semantics. Syntax extensions are available in scripts and interactive sessions; interactive-only features like history expansion, completions, and prompt styling disable themselves automatically when stdin is not a tty. Use <code>--minimal</code> or <code>--secure</code> when you want fewer extras in interactive shells.</p>"},{"location":"getting-started/what-to-know/#completion-learning-paths","title":"Completion Learning Paths","text":"<p>When cjsh scrapes man pages for completions, it uses <code>man</code> from <code>PATH</code> by default. Set <code>CJSH_MAN_PATH</code> to force a specific <code>man</code> binary. In secure mode (<code>--secure</code>), cjsh only uses <code>CJSH_MAN_PATH</code> and skips scraping if it is not set or invalid.</p> <p>When <code>cjsh</code> is symlinked or launched as <code>sh</code>, interactive sessions print a reminder that cjsh is not a drop-in 100% POSIX shell. Suppress this notice with <code>cjsh --no-sh-warning</code> or persist the choice by adding <code>cjshopt login-startup-arg --no-sh-warning</code> inside <code>~/.cjprofile</code>.</p>"},{"location":"getting-started/what-to-know/#extended-interactive-tools","title":"Extended Interactive Tools","text":""},{"location":"getting-started/what-to-know/#abbreviations","title":"Abbreviations","text":"<p>Define inline expansions with the <code>abbr</code> builtin:</p> <pre><code>abbr gs='git status --short --branch'\nabbr                 # list abbreviations\nunabbr gs            # remove an abbreviation\n</code></pre>"},{"location":"getting-started/what-to-know/#typeahead","title":"Typeahead","text":"<p>Keystrokes are buffered while commands run so no input is lost. This is always enabled.</p>"},{"location":"getting-started/what-to-know/#key-bindings","title":"Key Bindings","text":"<p>Inspect or tweak key bindings with:</p> <pre><code>cjshopt keybind list                   # safe at runtime\ncjshopt keybind profile list           # show available profiles\ncjshopt keybind profile set vi         # choose vi bindings (persist in ~/.cjshrc)\ncjshopt keybind set &lt;action&gt; &lt;keys&gt;    # redefine bindings (run from config files)\ncjshopt keybind add &lt;action&gt; &lt;keys&gt;    # append bindings (run from config files)\n</code></pre> <p>Use <code>cjshopt keybind --help</code> for the full action catalog. For custom widgets, see the <code>cjsh-widget</code> builtin in the reference documentation.</p>"},{"location":"getting-started/what-to-know/#getting-help","title":"Getting Help","text":"<ul> <li><code>help</code> \u2013 Overview of built-in commands.</li> <li><code>help &lt;builtin&gt;</code> \u2013 Detailed usage for a specific builtin.</li> <li><code>cjshopt --help</code> and <code>cjshopt &lt;subcommand&gt; --help</code> \u2013 Configuration guidance.</li> <li>Documentation lives under <code>docs/reference/</code> for deeper dives into editing, scripting, hooks, and prompt styling.</li> </ul>"},{"location":"getting-started/what-to-know/#quick-configuration-examples","title":"Quick Configuration Examples","text":"<pre><code># Toggle completion preview for the current session\ncjshopt completion-preview off\n\n# Enable inline whitespace markers\ncjshopt visible-whitespace on\n\n# Switch to vi key bindings (add to ~/.cjshrc to persist)\ncjshopt keybind profile set vi\n\n# Increase history retention\ncjshopt set-history-max 20000\n</code></pre> <p>Persist startup flags by placing commands like the following in <code>~/.cjprofile</code>:</p> <pre><code>cjshopt login-startup-arg --no-colors\n</code></pre> <p>Run <code>cjshopt --help</code> for a complete list of interactive toggles and their detailed help screens.</p>"},{"location":"reference/commands/","title":"Built-in Commands","text":""},{"location":"reference/commands/#built-in-commands-reference","title":"Built-in Commands Reference","text":"<p>CJ's Shell provides a comprehensive set of built-in commands that are available without requiring external programs. These commands are optimized for both interactive use and shell scripting.</p>"},{"location":"reference/commands/#navigation-and-file-system","title":"Navigation and File System","text":""},{"location":"reference/commands/#cd","title":"cd","text":"<p>Change the current working directory.</p> <pre><code>cd [directory]\n</code></pre> <ul> <li>Use <code>cd</code> without arguments to go to home directory</li> <li>Use <code>cd -</code> to switch to the previous directory</li> <li>Smart CD is enabled by default: if a single fuzzy match exists, cjsh jumps to it</li> <li>Disable smart cd with <code>cjshopt smart-cd off</code> or <code>cjsh --no-smart-cd</code></li> </ul>"},{"location":"reference/commands/#pushd","title":"pushd","text":"<p>Push the current directory onto a stack and change directories.</p> <pre><code>pushd [directory]\n</code></pre> <ul> <li>With no arguments, swaps the current directory with the top of the stack</li> <li>The stack is shared with <code>popd</code> and <code>dirs</code></li> </ul>"},{"location":"reference/commands/#popd","title":"popd","text":"<p>Pop the top directory from the stack and change to it.</p> <pre><code>popd\n</code></pre> <ul> <li>Errors if the directory stack is empty</li> </ul>"},{"location":"reference/commands/#dirs","title":"dirs","text":"<p>Display the directory stack.</p> <pre><code>dirs\n</code></pre> <ul> <li>Prints the current directory followed by stacked entries</li> </ul>"},{"location":"reference/commands/#pwd","title":"pwd","text":"<p>Print the current working directory.</p> <pre><code>pwd\n</code></pre>"},{"location":"reference/commands/#text-output","title":"Text Output","text":""},{"location":"reference/commands/#echo","title":"echo","text":"<p>Print arguments separated by spaces.</p> <pre><code>echo [args...]\n</code></pre>"},{"location":"reference/commands/#printf","title":"printf","text":"<p>Format and print data using printf-style specifiers.</p> <pre><code>printf format [arguments...]\n</code></pre>"},{"location":"reference/commands/#shell-control","title":"Shell Control","text":""},{"location":"reference/commands/#exit-quit","title":"exit / quit","text":"<p>Leave the shell with an optional exit status.</p> <pre><code>exit [n]\nquit [n]\n</code></pre>"},{"location":"reference/commands/#help","title":"help","text":"<p>Display the CJSH command reference.</p> <pre><code>help\n</code></pre>"},{"location":"reference/commands/#version","title":"version","text":"<p>Show cjsh version information.</p> <pre><code>version\n</code></pre>"},{"location":"reference/commands/#script-execution","title":"Script Execution","text":""},{"location":"reference/commands/#source","title":"source / .","text":"<p>Execute commands from a file in the current shell context.</p> <pre><code>source filename [arguments...]\n. filename [arguments...]\n</code></pre> <p>When you execute a script file directly (for example, <code>./script.sh</code>) CJSH can infer an interpreter from the file extension if the file has no shebang. Toggle this with <code>cjshopt script-extension-interpreter</code> or <code>--no-script-extension-interpreter</code>.</p>"},{"location":"reference/commands/#eval","title":"eval","text":"<p>Evaluate a string as shell code.</p> <pre><code>eval [args...]\n</code></pre>"},{"location":"reference/commands/#exec","title":"exec","text":"<p>Replace the shell process with another program.</p> <pre><code>exec command [args...]\n</code></pre>"},{"location":"reference/commands/#variables-and-environment","title":"Variables and Environment","text":""},{"location":"reference/commands/#export","title":"export","text":"<p>Set or display environment variables.</p> <pre><code>export [name[=value]...]\n</code></pre>"},{"location":"reference/commands/#unset","title":"unset","text":"<p>Remove environment variables.</p> <pre><code>unset name [name...]\n</code></pre>"},{"location":"reference/commands/#local","title":"local","text":"<p>Declare local variables inside functions.</p> <pre><code>local name[=value] [name[=value]...]\n</code></pre>"},{"location":"reference/commands/#readonly","title":"readonly","text":"<p>Mark variables as read-only.</p> <pre><code>readonly name[=value] [name[=value]...]\n</code></pre>"},{"location":"reference/commands/#set","title":"set","text":"<p>Adjust shell options or positional parameters.</p> <pre><code>set [options] [args...]\n</code></pre> <ul> <li><code>set -o huponexit</code> mirrors bash's hangup behavior toggle; when enabled the shell sends   SIGHUP/SIGTERM to managed background jobs as it exits. Leave it off (the default) to keep helpers   like dev servers alive until you explicitly stop them.</li> </ul>"},{"location":"reference/commands/#shift","title":"shift","text":"<p>Rotate positional parameters to the left.</p> <pre><code>shift [n]\n</code></pre>"},{"location":"reference/commands/#aliases","title":"Aliases","text":""},{"location":"reference/commands/#alias","title":"alias","text":"<p>Create or list command aliases.</p> <pre><code>alias [name[=value]...]\n</code></pre>"},{"location":"reference/commands/#unalias","title":"unalias","text":"<p>Remove command aliases.</p> <pre><code>unalias name [name...]\n</code></pre>"},{"location":"reference/commands/#abbreviations","title":"Abbreviations","text":""},{"location":"reference/commands/#abbr","title":"abbr","text":"<p>Create, update, or list fish-style abbreviations that expand during interactive editing.</p> <pre><code>abbr [name=expansion ...]\n</code></pre> <ul> <li>Run without arguments to display all configured abbreviations</li> <li>Use <code>name=expansion</code> pairs to set or update entries</li> <li>Triggers that contain whitespace are rejected</li> <li>Abbreviations expand when the trigger is followed by whitespace or when the line is submitted</li> <li>Two defaults are shipped with cjsh: <code>abbr</code> \u2192 <code>abbreviate</code> and <code>unabbr</code> \u2192 <code>unabbreviate</code></li> </ul>"},{"location":"reference/commands/#unabbr","title":"unabbr","text":"<p>Remove one or more fish-style abbreviations.</p> <pre><code>unabbr name [name...]\n</code></pre> <ul> <li>Removing a non-existent abbreviation prints a warning but does not stop processing the rest</li> <li>Pair with <code>abbr</code> to keep a clean set of triggers in your session configuration</li> </ul>"},{"location":"reference/commands/#control-flow","title":"Control Flow","text":""},{"location":"reference/commands/#if","title":"if","text":"<p>Run conditional blocks in scripts.</p> <pre><code>if condition; then\n    commands\n[elif condition; then\n    commands]\n[else\n    commands]\nfi\n</code></pre>"},{"location":"reference/commands/#test","title":"test / [","text":"<p>Evaluate POSIX test expressions.</p> <pre><code>test expression\n[ expression ]\n</code></pre>"},{"location":"reference/commands/#_1","title":"[[","text":"<p>Evaluate extended test expressions (bash-style).</p> <pre><code>[[ expression ]]\n</code></pre>"},{"location":"reference/commands/#break","title":"break","text":"<p>Exit the current loop.</p> <pre><code>break [n]\n</code></pre>"},{"location":"reference/commands/#continue","title":"continue","text":"<p>Skip to the next loop iteration.</p> <pre><code>continue [n]\n</code></pre>"},{"location":"reference/commands/#return","title":"return","text":"<p>Exit the current function with an optional status.</p> <pre><code>return [n]\n</code></pre>"},{"location":"reference/commands/#_2","title":":","text":"<p>No-op command that always succeeds.</p> <pre><code>:\n</code></pre>"},{"location":"reference/commands/#true","title":"true","text":"<p>Always succeed and return exit status 0. Handy for conditionals or resetting <code>$?</code>.</p> <pre><code>true\n</code></pre>"},{"location":"reference/commands/#false","title":"false","text":"<p>Always fail and return exit status 1. Useful for testing error paths or short-circuiting scripts.</p> <pre><code>false\n</code></pre>"},{"location":"reference/commands/#job-control","title":"Job Control","text":""},{"location":"reference/commands/#jobs","title":"jobs","text":"<p>List background jobs.</p> <pre><code>jobs\n</code></pre>"},{"location":"reference/commands/#fg","title":"fg","text":"<p>Bring a job to the foreground.</p> <pre><code>fg [job_spec]\n</code></pre>"},{"location":"reference/commands/#bg","title":"bg","text":"<p>Resume a job in the background.</p> <pre><code>bg [job_spec]\n</code></pre>"},{"location":"reference/commands/#auto-background-on-ctrlz","title":"Auto-background on Ctrl+Z","text":"<p>Append <code>&amp;^</code> to a command to mark it for automatic backgrounding the first time you press <code>Ctrl+Z</code>.</p> <p>Append <code>&amp;^!</code> to auto-background on <code>Ctrl+Z</code> and discard stdout/stderr after the suspend so the prompt stays clean. Output is restored if you bring the job back with <code>fg</code>.</p> <pre><code>long_running_task &amp;^\nlong_running_task &amp;^!\n</code></pre>"},{"location":"reference/commands/#wait","title":"wait","text":"<p>Wait for jobs or processes to finish.</p> <pre><code>wait [pid|job_spec...]\n</code></pre>"},{"location":"reference/commands/#kill","title":"kill","text":"<p>Send signals to jobs or processes.</p> <pre><code>kill [-signal] pid|job_spec\n</code></pre>"},{"location":"reference/commands/#disown","title":"disown","text":"<p>Detach jobs from the shell so they are no longer listed or sent hangup signals when cjsh exits.</p> <pre><code>disown [-a|--all] [job_spec...]\n</code></pre> <ul> <li>With no arguments, the current job is disowned</li> <li><code>-a/--all</code> removes every tracked job in one shot</li> <li>Disowned jobs continue running even if <code>set -o huponexit</code> is enabled later in the session</li> </ul>"},{"location":"reference/commands/#jobname","title":"jobname","text":"<p>Assign or update a friendly display name for a tracked job. The name shows up in <code>jobs</code>, <code>fg</code>, <code>bg</code>, and completions while the job remains in the table.</p> <pre><code>jobname JOB_SPEC NEW_NAME\n</code></pre> <ul> <li><code>JOB_SPEC</code> can be a <code>%job_id</code>, a PID, or any command prefix that normally resolves jobs (<code>fg</code> and <code>bg</code>-style matching)</li> <li><code>NEW_NAME</code> is treated as the rest of the command line after <code>JOB_SPEC</code>, so spaces are allowed</li> <li>Names must contain at least one non-whitespace character; use the original command to revert</li> </ul>"},{"location":"reference/commands/#signal-handling","title":"Signal Handling","text":""},{"location":"reference/commands/#trap","title":"trap","text":"<p>Set signal handlers or list existing traps.</p> <pre><code>trap [action] [signal...]\n</code></pre>"},{"location":"reference/commands/#command-information","title":"Command Information","text":""},{"location":"reference/commands/#type","title":"type","text":"<p>Explain how a command name will be resolved.</p> <pre><code>type name [name...]\n</code></pre>"},{"location":"reference/commands/#which","title":"which","text":"<p>Locate executables in PATH.</p> <pre><code>which name [name...]\n</code></pre>"},{"location":"reference/commands/#hash","title":"hash","text":"<p>Cache command lookups or display the cache.</p> <pre><code>hash [-r] [name...]\n</code></pre>"},{"location":"reference/commands/#generate-completions","title":"generate-completions","text":"<p>Regenerate cached completion metadata for external commands.</p> <pre><code>generate-completions [--quiet] [--no-force] [-j jobs] [command ...]\n</code></pre> <ul> <li>Runs against every executable discoverable in <code>PATH</code> when no command list is supplied</li> <li><code>--quiet</code> suppresses per-command status messages and prints only a summary (failures are listed)</li> <li><code>--no-force</code> keeps existing cache files and only generates data for missing entries</li> <li><code>-j/--jobs</code> limits the number of commands processed simultaneously (defaults to CPU count)</li> <li>Summary output includes total elapsed time for the run</li> <li>Use <code>--</code> to end option parsing when processing command names that start with a dash</li> </ul>"},{"location":"reference/commands/#builtin","title":"builtin","text":"<p>Run a builtin directly, bypassing functions and PATH.</p> <pre><code>builtin command [args...]\n</code></pre>"},{"location":"reference/commands/#command","title":"command","text":"<p>Execute a command while bypassing shell functions or print information about it.</p> <pre><code>command [-pVv] COMMAND [ARG...]\n</code></pre> <p>Options: - <code>-p</code> \u2013 Temporarily use the default <code>PATH</code> of <code>/usr/bin:/bin</code> when resolving <code>COMMAND</code> - <code>-v</code> \u2013 Print a short description of how <code>COMMAND</code> would be resolved - <code>-V</code> \u2013 Print a verbose description (builtin, full path, or not found)</p> <p>When no inspection flags are supplied, <code>command</code> runs the target using the shell's execution engine, allowing you to bypass shell functions that shadow external commands. The command returns the exit status of the invoked program.</p>"},{"location":"reference/commands/#hook-system","title":"Hook System","text":""},{"location":"reference/commands/#hook","title":"hook","text":"<p>Manage shell hooks that run at key lifecycle moments.</p> <pre><code>hook &lt;add|remove|list|clear&gt; [hook_type] [function_name]\n</code></pre> <p>Hook types include <code>precmd</code>, <code>preexec</code>, and <code>chpwd</code>. Use <code>hook add</code> inside configuration files to register functions and <code>hook list</code> to inspect active hooks. See <code>hooks.md</code> for complete examples and best practices.</p>"},{"location":"reference/commands/#inputoutput","title":"Input/Output","text":""},{"location":"reference/commands/#read","title":"read","text":"<p>Read user input into variables.</p> <pre><code>read [options] name [name...]\n</code></pre>"},{"location":"reference/commands/#getopts","title":"getopts","text":"<p>Parse positional parameters as short options.</p> <pre><code>getopts optstring name [args...]\n</code></pre>"},{"location":"reference/commands/#history","title":"History","text":""},{"location":"reference/commands/#history_1","title":"history","text":"<p>Display command history.</p> <pre><code>history [n]\n</code></pre> <ul> <li>Without arguments, displays all history entries</li> <li>With a number <code>n</code>, displays the last <code>n</code> entries</li> <li>History is stored in <code>~/.cache/cjsh/history.txt</code></li> </ul>"},{"location":"reference/commands/#fc","title":"fc","text":"<p>Fix Command - edit and re-execute commands from history (POSIX-compliant).</p> <pre><code>fc [-e editor] [-ln] [first [last]]\n</code></pre> <p>Options: - <code>-e editor</code> - Use specified editor (default: <code>$FCEDIT</code>, <code>$EDITOR</code>, or <code>vi</code>) - <code>-l</code> - List commands instead of editing - <code>-n</code> - Suppress line numbers when listing - <code>-r</code> - Reverse order of commands when listing</p> <p>Arguments: - <code>first</code> - First command to edit/list (default: previous command) - <code>last</code> - Last command to edit/list (default: same as first)</p> <p>Examples:</p> <pre><code># Edit the previous command in your editor\nfc\n\n# Edit command number 53\nfc 53\n\n# Edit commands 10 through 15\nfc 10 15\n\n# List last 16 commands\nfc -l\n\n# List commands 10 through 20\nfc -l 10 20\n\n# Edit with a specific editor\nfc -e nano\n\n# Use with environment variables\nexport FCEDIT=nano\nfc  # Will use nano as the editor\n</code></pre> <p>How it works: 1. Opens the specified command(s) in your editor 2. When you save and exit the editor, the modified command is displayed 3. The modified command is automatically executed 4. The result is added to history</p> <p>Environment Variables: - <code>FCEDIT</code> - Preferred editor for <code>fc</code> (checked first) - <code>EDITOR</code> - Fallback editor if <code>FCEDIT</code> is not set - Default is <code>ed</code> if neither variable is set (POSIX requirement)</p> <p>Tip: For a better editing experience, set your preferred editor: </p><pre><code>export FCEDIT=vi     # or nano, emacs, etc.\nexport EDITOR=vi     # fallback for other tools too\n</code></pre><p></p>"},{"location":"reference/commands/#system-information","title":"System Information","text":""},{"location":"reference/commands/#times","title":"times","text":"<p>Show CPU usage for the shell and its children.</p> <pre><code>times\n</code></pre>"},{"location":"reference/commands/#umask","title":"umask","text":"<p>Show or set the file creation mask.</p> <pre><code>umask [mode]\n</code></pre>"},{"location":"reference/commands/#ulimit","title":"ulimit","text":"<p>Inspect or adjust resource limits for the current shell and any processes it launches.</p> <pre><code>ulimit [-HS] [-a] [-f | -n | -t | ...] [limit]\n</code></pre> <ul> <li><code>-a</code> lists every supported limit along with the active hard/soft values.</li> <li>Use <code>-H</code> or <code>-S</code> to operate on the hard or soft limit respectively (defaults to soft).</li> <li>Resource selectors mirror the underlying OS (<code>-f</code> file size, <code>-n</code> open files, <code>-t</code> CPU time, <code>-v</code> virtual memory, etc.). Unsupported switches print a descriptive error.</li> <li>Limits accept numeric values, or the keywords <code>unlimited</code>, <code>hard</code>, or <code>soft</code>.</li> </ul> <p>Run <code>ulimit --help</code> for the full table of supported options on your platform.</p>"},{"location":"reference/commands/#theming-and-customization","title":"Theming and Customization","text":""},{"location":"reference/commands/#prompt-styling","title":"Prompt Styling","text":"<p>cjsh reads the standard prompt variables, so customizing the look is as simple as exporting new values inside your configuration files:</p> <pre><code>export PS1='[b]\\u[/b] [color=#87ceeb]\\w[/color]\\n$ '\nexport RPS1='[ic-hint]\\A[/ic-hint]'\nexport PROMPT_COMMAND='__update_git_info'\n</code></pre> <p>Add snippets like these to <code>~/.cjshrc</code> (or any sourced config) to persist them across sessions. See Prompt Markup and Styling for the full markup reference plus additional examples.</p>"},{"location":"reference/commands/#cjshopt","title":"cjshopt","text":"<p>Generate config files and adjust cjsh options.</p> <pre><code>cjshopt &lt;subcommand&gt; [options]\n</code></pre> <p>Available subcommands: - <code>style_def</code> - Define or redefine syntax highlighting styles - <code>login-startup-arg</code> - Add startup flags (config file only) - <code>completion-case</code> - Configure completion case sensitivity - <code>history-search-case</code> - Configure fuzzy history case sensitivity - <code>completion-spell</code> - Toggle spell correction suggestions in completions - <code>completion-learning</code> - Toggle automatic completion learning from man pages - <code>script-extension-interpreter</code> - Toggle extension-based script runners - <code>line-numbers</code> - Configure line numbers in multiline input (on/off/relative/absolute) - <code>line-numbers-replace-prompt</code> - Replace the final prompt line with the line-number gutter - <code>current-line-number-highlight</code> - Toggle highlighting of the current line number - <code>multiline-start-lines</code> - Configure how many prompt lines are preallocated in multiline mode - <code>hint-delay</code> - Set hint display delay in milliseconds - <code>completion-preview</code> - Configure completion preview - <code>visible-whitespace</code> - Toggle visible whitespace characters in the editor - <code>hint</code> - Configure inline hints - <code>multiline-indent</code> - Configure auto-indent in multiline input - <code>multiline</code> - Configure multiline input mode - <code>inline-help</code> - Configure inline help messages - <code>auto-tab</code> - Configure automatic tab completion - <code>prompt-newline</code> - Force a blank line after each command - <code>prompt-cleanup</code> - Enable/disable removal of the previous prompt after execution - <code>prompt-cleanup-newline</code> - Control whether cleanup inserts a newline before the next prompt - <code>prompt-cleanup-empty-line</code> - Insert an empty spacer line during cleanup - <code>prompt-cleanup-truncate</code> - Collapse multiline prompts when cleanup runs - <code>right-prompt-follow-cursor</code> - Keep the inline right prompt aligned with the active cursor row - <code>keybind</code> - Inspect or modify key bindings (modifications config file only) - <code>generate-profile</code> - Create or overwrite ~/.cjprofile (use <code>--alt</code> for <code>~/.config/cjsh/.cjprofile</code>) - <code>generate-rc</code> - Create or overwrite ~/.cjshrc (use <code>--alt</code> for <code>~/.config/cjsh/.cjshrc</code>) - <code>generate-logout</code> - Create or overwrite ~/.cjsh_logout (use <code>--alt</code> for <code>~/.config/cjsh/.cjsh_logout</code>) - <code>set-history-max</code> - Configure history persistence limits - <code>set-completion-max</code> - Limit the maximum number of completion suggestions shown</p>"},{"location":"reference/commands/#cjsh-widget","title":"cjsh-widget","text":"<p>Interact with the embedded line editor (isocline) to drive advanced key bindings.</p> <pre><code>cjsh-widget &lt;subcommand&gt; [...]\n</code></pre> <p>Available subcommands include: - <code>get-buffer</code> / <code>set-buffer</code> \u2013 Read or replace the active input buffer - <code>get-cursor</code> / <code>set-cursor</code> \u2013 Inspect or move the cursor (byte offsets) - <code>insert</code> / <code>append</code> / <code>clear</code> \u2013 Modify buffer contents near the cursor or reset the line - <code>accept</code> \u2013 Simulate pressing Enter to submit the current buffer</p> <p>These commands are primarily used from custom key bindings and widgets rather than typed interactively. Combine them with <code>cjshopt keybind ext</code> inside <code>~/.cjshrc</code> to create bespoke editing behaviors.</p>"},{"location":"reference/commands/#login-startup-arg","title":"login-startup-arg","text":"<p>Persist startup flags that should be applied before the interactive configuration is sourced. This command is only honored inside startup files such as <code>~/.cjprofile</code>; running it at an interactive prompt prints an error.</p> <pre><code>cjshopt login-startup-arg &lt;flag&gt;\n</code></pre> <p>Supported flags:</p> Flag Effect <code>--login</code> Mark the current shell instance as a login shell <code>--interactive</code> Force interactive startup behavior <code>--no-colors</code> Disable colorized prompt and syntax output <code>--no-titleline</code> Disable terminal title updates on startup <code>--show-startup-time</code> Print the time spent initializing cjsh <code>--no-source</code> Skip sourcing interactive configuration files <code>--no-completions</code> Skip completion initialization <code>--no-completion-learning</code> Skip on-demand man-page scraping for completions <code>--no-script-extension-interpreter</code> Disable extension-based script runners <code>--no-smart-cd</code> Disable smart cd auto-jumps <code>--no-syntax-highlighting</code> Disable syntax highlighting in the editor <code>--no-history-expansion</code> Disable <code>!!</code>, <code>!$</code>, and related history tokens <code>--no-sh-warning</code> Suppress the reminder shown when cjsh is invoked via <code>sh</code> <code>--minimal</code> Disable prompt themes/colors, completions, syntax highlighting, rc sourcing, title line, history expansion, multiline line numbers, and auto-indentation <code>--secure</code> Skip profile/rc/logout sourcing even for login shells <code>--posix</code> Enable POSIX mode and reject non-POSIX syntax <code>--startup-test</code> Enable startup test mode <p>Add one line per flag in <code>~/.cjprofile</code> to persist the desired behavior:</p> <pre><code># Inside ~/.cjprofile\ncjshopt login-startup-arg --minimal\ncjshopt login-startup-arg --show-startup-time\n</code></pre>"},{"location":"reference/commands/#completion-case","title":"completion-case","text":"<p>Toggle whether tab completions treat case as significant. Synonyms such as <code>enable</code>, <code>disable</code>, <code>true</code>, and <code>false</code> are also accepted for convenience.</p> <pre><code>cjshopt completion-case &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt completion-case on      # Case-sensitive matching\ncjshopt completion-case off     # Case-insensitive matching (default)\ncjshopt completion-case status  # Show the current mode\n</code></pre> <p>Add the command to <code>~/.cjshrc</code> if you want the preference remembered across sessions.</p>"},{"location":"reference/commands/#history-search-case","title":"history-search-case","text":"<p>Control whether the fuzzy history search menu (<code>Ctrl+R</code>/<code>Ctrl+S</code> or <code>cjsh-widget history-search</code>) treats letter case as significant. When case sensitivity is enabled (the default), <code>make</code> and <code>Make</code> are treated as different queries. Turning it off allows uppercase queries to match lowercase history entries and vice versa. Synonyms such as <code>enable</code>, <code>disable</code>, <code>true</code>, <code>false</code>, and <code>--status</code> are supported for convenience, and you can always press <code>Alt+C</code> while the menu is open to flip the setting temporarily.</p> <pre><code>cjshopt history-search-case &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt history-search-case on      # Require exact casing in the fuzzy history menu (default)\ncjshopt history-search-case off     # Match history entries case insensitively\ncjshopt history-search-case status  # Show the current setting\n</code></pre> <p>Add the command to <code>~/.cjshrc</code> to persist the preference.</p>"},{"location":"reference/commands/#completion-spell","title":"completion-spell","text":"<p>Enable, disable, or inspect spell correction inside the completion engine. When enabled, cjsh will try to fix minor typos before offering suggestions. The subcommand also accepts synonyms such as <code>enable</code>, <code>disable</code>, <code>true</code>, <code>false</code>, and <code>--status</code>.</p> <pre><code>cjshopt completion-spell &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt completion-spell on       # Turn on spell correction\ncjshopt completion-spell status   # Display the current state\n</code></pre> <p>Persist the choice by placing the command in <code>~/.cjshrc</code>.</p>"},{"location":"reference/commands/#completion-learning","title":"completion-learning","text":"<p>Control whether cjsh scrapes man pages on demand to learn completions for external commands. When disabled, cjsh uses cached completion files and builtin metadata only. The subcommand accepts synonyms such as <code>enable</code>, <code>disable</code>, <code>true</code>, <code>false</code>, and <code>--status</code>.</p> <pre><code>cjshopt completion-learning &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt completion-learning on       # Allow on-demand man-page scraping (default)\ncjshopt completion-learning off      # Disable new man-page lookups\ncjshopt completion-learning status   # Show the current setting\n</code></pre> <p>Add the command to <code>~/.cjshrc</code> to persist the preference.</p>"},{"location":"reference/commands/#smart-cd","title":"smart-cd","text":"<p>Enable, disable, or inspect smart cd auto-jumps. When enabled, <code>cd</code> will auto-jump to a single fuzzy match (e.g., a nearby directory with a close name). Synonyms such as <code>enable</code>, <code>disable</code>, <code>true</code>, <code>false</code>, and <code>--status</code> are supported.</p> <pre><code>cjshopt smart-cd &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt smart-cd on       # Enable smart cd auto-jumps\ncjshopt smart-cd off      # Disable smart cd auto-jumps\ncjshopt smart-cd status   # Show the current setting\n</code></pre> <p>Add the command to <code>~/.cjshrc</code> to persist the preference.</p>"},{"location":"reference/commands/#script-extension-interpreter","title":"script-extension-interpreter","text":"<p>Enable, disable, or inspect extension-based script runners. When enabled, cjsh can infer the interpreter from a script's file extension when there is no shebang (for example, <code>.sh</code> \u2192 <code>sh</code>, <code>.bash</code> \u2192 <code>bash</code>, <code>.zsh</code> \u2192 <code>zsh</code>, <code>.ksh</code> \u2192 <code>ksh</code>). Synonyms such as <code>enable</code>, <code>disable</code>, <code>true</code>, <code>false</code>, and <code>--status</code> are supported.</p> <pre><code>cjshopt script-extension-interpreter &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt script-extension-interpreter on       # Enable extension-based script runners\ncjshopt script-extension-interpreter off      # Disable extension-based script runners\ncjshopt script-extension-interpreter status   # Show the current setting\n</code></pre> <p>Add the command to <code>~/.cjshrc</code> to persist the preference.</p>"},{"location":"reference/commands/#line-numbers","title":"line-numbers","text":"<p>Enable, disable, or inspect line numbers in multiline input mode. When enabled, cjsh will display numbers on the left side of multiline input, making it easier to navigate and edit multi-line commands or scripts. You can choose between absolute numbering (the default) or relative numbering, which shows the distance to the active cursor line.</p> <pre><code>cjshopt line-numbers &lt;on|off|relative|absolute|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt line-numbers on       # Enable line numbers in multiline input\ncjshopt line-numbers relative # Switch to relative numbering\ncjshopt line-numbers off      # Disable line numbers in multiline input\ncjshopt line-numbers status   # Show the current setting\n</code></pre> <p>Add the command to <code>~/.cjshrc</code> to persist the setting across sessions. The subcommand also accepts synonyms such as <code>enable</code>, <code>disable</code>, <code>true</code>, <code>false</code>, <code>absolute</code>, and <code>rel</code>/<code>relative</code>.</p> <p>Tip: Style the line numbers themselves with <code>cjshopt style_def ic-linenumbers \"color=#FFB86C\"</code> (or any other style). See <code>cjshopt style_def</code> for the full list of supported style directives.</p>"},{"location":"reference/commands/#line-numbers-continuation","title":"line-numbers-continuation","text":"<p>Control whether multiline line numbers remain visible when a continuation prompt marker (PS2) is configured. By default, configuring a continuation prompt hides the numbers; enabling this option keeps them aligned with the continuation marker instead.</p> <pre><code>cjshopt line-numbers-continuation &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt line-numbers-continuation on      # Keep line numbers even with custom continuation prompts\ncjshopt line-numbers-continuation off     # Hide line numbers whenever a continuation prompt exists\ncjshopt line-numbers-continuation status  # Show the current setting\n</code></pre> <p>Add the command to <code>~/.cjshrc</code> to persist the setting across sessions. Synonyms such as <code>enable</code>, <code>disable</code>, <code>true</code>, <code>false</code>, and <code>--status</code> are also accepted.</p>"},{"location":"reference/commands/#line-numbers-replace-prompt","title":"line-numbers-replace-prompt","text":"<p>Swap the final line of a multi-line prompt (the row that normally precedes your input) with the line-number gutter. This option only takes effect when line numbers are active and either no custom <code>PS2</code> is configured or <code>cjshopt line-numbers-continuation on</code> is in effect.</p> <pre><code>cjshopt line-numbers-replace-prompt &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt line-numbers-replace-prompt on      # Replace the final prompt line with the numeric gutter\ncjshopt line-numbers-replace-prompt off     # Keep the final prompt line visible\ncjshopt line-numbers-replace-prompt status  # Show the current setting\n</code></pre> <p>Add the command to <code>~/.cjshrc</code> to persist the setting across sessions.</p>"},{"location":"reference/commands/#current-line-number-highlight","title":"current-line-number-highlight","text":"<p>Enable or disable highlighting of the current line number in multiline input mode. When enabled (default), the line number for the line containing the cursor is displayed in a different style than other line numbers.</p> <pre><code>cjshopt current-line-number-highlight &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt current-line-number-highlight on      # Enable current line highlighting\ncjshopt current-line-number-highlight off     # Disable current line highlighting\ncjshopt current-line-number-highlight status  # Show the current setting\n</code></pre> <p>Add the command to <code>~/.cjshrc</code> to persist the setting across sessions. Accepts synonyms like <code>enable</code>, <code>disable</code>, <code>true</code>, and <code>false</code>.</p> <p>Tip: Customize the current line number style with <code>cjshopt style_def ic-linenumber-current \"bold color=#FFB86C\"</code> to make it stand out from regular line numbers styled with <code>ic-linenumbers</code>.</p>"},{"location":"reference/commands/#multiline-start-lines","title":"multiline-start-lines","text":"<p>Configure how many prompt lines are preallocated when multiline input is enabled. This controls how many rows are shown before you start typing.</p> <pre><code>cjshopt multiline-start-lines &lt;count|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt multiline-start-lines 3      # Reserve three prompt lines in multiline mode\ncjshopt multiline-start-lines 1      # Restore the default\ncjshopt multiline-start-lines status # Show the current setting\n</code></pre> <p>Add the command to <code>~/.cjshrc</code> to persist the setting across sessions.</p>"},{"location":"reference/commands/#hint-delay","title":"hint-delay","text":"<p>Configure the delay (in milliseconds) before inline hints are displayed. This controls how quickly the shell shows suggestions and hints as you type.</p> <pre><code>cjshopt hint-delay &lt;milliseconds&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt hint-delay 100     # Set hint delay to 100 milliseconds\ncjshopt hint-delay 0       # Show hints immediately\ncjshopt hint-delay status  # Show the current delay setting\n</code></pre> <ul> <li>Valid range: 0 and above (0 shows hints immediately)</li> <li>Default: Varies based on system configuration</li> </ul> <p>Place the command in <code>~/.cjshrc</code> to keep the delay setting between sessions.</p>"},{"location":"reference/commands/#completion-preview","title":"completion-preview","text":"<p>Toggle the completion preview feature, which shows a preview of the selected completion as you navigate through completion options.</p> <pre><code>cjshopt completion-preview &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt completion-preview on      # Enable completion preview\ncjshopt completion-preview off     # Disable completion preview\ncjshopt completion-preview status  # Show the current setting\n</code></pre> <p>The subcommand accepts synonyms such as <code>enable</code>, <code>disable</code>, <code>true</code>, and <code>false</code>. Add to <code>~/.cjshrc</code> to persist the preference.</p>"},{"location":"reference/commands/#visible-whitespace","title":"visible-whitespace","text":"<p>Show or hide visible markers for whitespace characters (such as spaces) while editing commands. When enabled, spaces are rendered with a subtle middle-dot marker so you can spot trailing or double spacing issues.</p> <pre><code>cjshopt visible-whitespace &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt visible-whitespace on      # Show whitespace markers while editing\ncjshopt visible-whitespace off     # Hide whitespace markers (default)\ncjshopt visible-whitespace status  # Show the current setting\n</code></pre> <p>Add the command to <code>~/.cjshrc</code> to keep the preference across sessions. Synonyms like <code>enable</code>, <code>disable</code>, <code>true</code>, and <code>false</code> are accepted.</p>"},{"location":"reference/commands/#hint","title":"hint","text":"<p>Enable, disable, or inspect inline hints that appear as you type commands. Hints can include suggestions, command completions, and other helpful information.</p> <pre><code>cjshopt hint &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt hint on       # Enable inline hints\ncjshopt hint off      # Disable inline hints\ncjshopt hint status   # Show the current setting\n</code></pre> <p>Synonyms like <code>enable</code>, <code>disable</code>, <code>true</code>, and <code>false</code> are supported. Persist the setting by adding the command to <code>~/.cjshrc</code>.</p>"},{"location":"reference/commands/#multiline-indent","title":"multiline-indent","text":"<p>Configure automatic indentation in multiline input mode. When enabled, the shell will automatically indent continuation lines based on the context (e.g., after opening braces, parentheses, or control structures).</p> <pre><code>cjshopt multiline-indent &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt multiline-indent on       # Enable automatic indentation\ncjshopt multiline-indent off      # Disable automatic indentation\ncjshopt multiline-indent status   # Show the current setting\n</code></pre> <p>This is particularly useful when writing shell scripts or complex commands directly in the shell. Add to <code>~/.cjshrc</code> to keep the setting. Accepts synonyms such as <code>enable</code>, <code>disable</code>, <code>true</code>, and <code>false</code>.</p>"},{"location":"reference/commands/#multiline","title":"multiline","text":"<p>Enable or disable multiline input mode entirely. When enabled, you can enter commands that span multiple lines. When disabled, the shell treats each line as a separate command.</p> <pre><code>cjshopt multiline &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt multiline on       # Enable multiline input\ncjshopt multiline off      # Disable multiline input\ncjshopt multiline status   # Show the current setting\n</code></pre> <p>Disabling multiline mode may be useful for simple command execution or when working with scripts that don't require multi-line editing. Accepts synonyms like <code>enable</code>, <code>disable</code>, <code>true</code>, and <code>false</code>. Persist by adding to <code>~/.cjshrc</code>.</p>"},{"location":"reference/commands/#inline-help","title":"inline-help","text":"<p>Toggle inline help messages that appear as you type commands. These messages can provide quick information about command syntax, options, and usage.</p> <pre><code>cjshopt inline-help &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt inline-help on       # Enable inline help messages\ncjshopt inline-help off      # Disable inline help messages\ncjshopt inline-help status   # Show the current setting\n</code></pre> <p>Supports synonyms such as <code>enable</code>, <code>disable</code>, <code>true</code>, and <code>false</code>. Add the command to <code>~/.cjshrc</code> to make the setting permanent.</p>"},{"location":"reference/commands/#status-hints","title":"status-hints","text":"<p>Control the underlined status hint banner (the line that lists keys like <code>complete</code>, <code>history search</code>, and <code>help</code>). Pick when it appears using one of four modes:</p> <ul> <li><code>off</code> \u2013 never display the banner.</li> <li><code>normal</code> \u2013 only show the banner when both the input buffer and status area are empty (default).</li> <li><code>transient</code> \u2013 show the banner whenever the status area has no other content.</li> <li><code>persistent</code> \u2013 always prepend the banner above any other status message.</li> </ul> <pre><code>cjshopt status-hints &lt;off|normal|transient|persistent|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt status-hints normal      # Only surface the hints on an empty prompt\ncjshopt status-hints persistent  # Keep the banner visible at all times\ncjshopt status-hints status      # Show the current mode\n</code></pre> <p>Add the command to <code>~/.cjshrc</code> to persist the mode across sessions.</p>"},{"location":"reference/commands/#status-line","title":"status-line","text":"<p>Remove or restore the entire status row beneath the prompt, including syntax feedback and the hint banner.</p> <pre><code>cjshopt status-line &lt;on|off|status&gt;\n</code></pre> <ul> <li><code>on</code> (default) \u2013 allow syntax validation text and <code>status-hints</code> output to appear.</li> <li><code>off</code> \u2013 suppress the status row completely; the last <code>status-hints</code> mode is remembered for when you turn it back on.</li> </ul> <p>Examples:</p> <pre><code>cjshopt status-line off     # Hide validation output and the hint banner\ncjshopt status-line on      # Restore the status row using the last hint mode\ncjshopt status-line status  # Display the current setting\n</code></pre> <p>Add the command to <code>~/.cjshrc</code> to persist the preference.</p>"},{"location":"reference/commands/#status-reporting","title":"status-reporting","text":"<p>Keep the status line visible for banners and custom output, but disable cjsh\u2019s built-in syntax/error reporting.</p> <pre><code>cjshopt status-reporting &lt;on|off|status&gt;\n</code></pre> <ul> <li><code>on</code> (default) \u2013 run cjsh\u2019s validation pipeline and print its summary below the prompt.</li> <li><code>off</code> \u2013 suppress cjsh-generated status messages while leaving <code>status-hints</code> (and any custom callbacks) intact.</li> </ul> <p>Examples:</p> <pre><code>cjshopt status-reporting off     # Keep hint banners but hide validation output\ncjshopt status-reporting on      # Re-enable syntax feedback\ncjshopt status-reporting status  # Display the current setting\n</code></pre> <p>Persist preferences by adding the command to <code>~/.cjshrc</code>.</p>"},{"location":"reference/commands/#auto-tab","title":"auto-tab","text":"<p>Configure automatic tab completion behavior. When enabled, the shell may automatically complete commands or show completions without requiring explicit tab key presses. Disabled by default.</p> <pre><code>cjshopt auto-tab &lt;on|off|status&gt;\n</code></pre> <p>Examples:</p> <pre><code>cjshopt auto-tab on       # Enable automatic tab completion\ncjshopt auto-tab off      # Disable automatic tab completion (default)\ncjshopt auto-tab status   # Show the current setting\n</code></pre> <p>Accepts synonyms including <code>enable</code>, <code>disable</code>, <code>true</code>, and <code>false</code>. Place in <code>~/.cjshrc</code> to persist the preference across sessions.</p>"},{"location":"reference/commands/#keybind","title":"keybind","text":"<p>Inspect or customize isocline key bindings. Modifying bindings requires running the command from a configuration file (<code>~/.cjshrc</code>); runtime changes are only supported for inspection.</p> <pre><code>cjshopt keybind &lt;subcommand&gt; [...]\n</code></pre> <p>Key subcommands include:</p> <ul> <li><code>list</code> - Show the active profile plus default vs. custom bindings (runtime safe)</li> <li><code>set &lt;action&gt; &lt;keys...&gt;</code> - Replace bindings for an action</li> <li><code>add &lt;action&gt; &lt;keys...&gt;</code> - Add additional bindings for an action</li> <li><code>clear &lt;keys...&gt;</code> - Remove the provided key specifications</li> <li><code>clear-action &lt;action&gt;</code> - Remove all custom bindings for an action</li> <li><code>reset</code> - Drop every custom binding and restore defaults</li> <li><code>profile list</code> - List available key binding profiles (runtime safe)</li> <li><code>profile set &lt;name&gt;</code> - Persist the named profile</li> </ul> <p>Key specifications accept pipe (<code>|</code>) separated alternatives, so <code>Ctrl+K|Ctrl+X</code> is a single argument covering both sequences. Place commands like <code>cjshopt keybind set cursor-left \"Ctrl+H\"</code> in <code>~/.cjshrc</code> to keep them between sessions.</p>"},{"location":"reference/commands/#set-history-max","title":"set-history-max","text":"<p>Adjust the number of entries stored in the persistent history file.</p> <pre><code>cjshopt set-history-max &lt;number|default|status&gt;\n</code></pre> <ul> <li>Provide any non-negative number (0 disables history persistence entirely)</li> <li>Use <code>default</code> to restore the built-in limit of 1000 entries</li> <li>Use <code>status</code> (or <code>--status</code>) to display the current setting</li> </ul> <p>Examples:</p> <pre><code>cjshopt set-history-max 0        # Disable history persistence\ncjshopt set-history-max 500      # Retain the latest 500 commands\ncjshopt set-history-max default  # Go back to the default limit\ncjshopt set-history-max status   # Show the current limit\n</code></pre> <p>Commands added to <code>~/.cjshrc</code> are applied automatically at startup.</p>"},{"location":"reference/commands/#set-completion-max","title":"set-completion-max","text":"<p>Limit how many completion entries are generated and displayed inside the menu each time you press <code>Tab</code>.</p> <pre><code>cjshopt set-completion-max &lt;number|default|status&gt;\n</code></pre> <ul> <li>Provide any number greater than or equal to 1</li> <li>Use <code>default</code> to restore the built-in limit of 1000 entries</li> <li>Use <code>status</code> (or <code>--status</code>) to inspect the current setting</li> </ul> <p>Examples:</p> <pre><code>cjshopt set-completion-max 50        # Show at most 50 suggestions\ncjshopt set-completion-max default   # Restore the default cap\ncjshopt set-completion-max status    # Display the current limit\n</code></pre> <p>Lowering the cap trims visual noise and speeds up completion-heavy commands, especially when thousands of filesystem matches would otherwise be generated. Add the command to <code>~/.cjshrc</code> to persist the preference.</p>"},{"location":"reference/commands/#prompt-newline","title":"prompt-newline","text":"<p>Control whether cjsh prints a blank line after every command, regardless of what your prompt already emitted.</p> <pre><code>cjshopt prompt-newline on\ncjshopt prompt-newline off\ncjshopt prompt-newline status\n</code></pre> <p>Enable the toggle to keep transcripts readable when prompts have dense information; disable it for a compact display.</p>"},{"location":"reference/commands/#prompt-cleanup","title":"prompt-cleanup","text":"<p>Remove the previous prompt before printing command output. This keeps long prompts from duplicating when you scroll back through logs.</p> <pre><code>cjshopt prompt-cleanup on\ncjshopt prompt-cleanup off\n</code></pre> <p>Pair this with the newline/empty-line toggles below for additional spacing control.</p>"},{"location":"reference/commands/#prompt-cleanup-newline","title":"prompt-cleanup-newline","text":"<p>Decide whether prompt cleanup inserts a newline before the next prompt renders.</p> <pre><code>cjshopt prompt-cleanup-newline on\ncjshopt prompt-cleanup-newline off\n</code></pre> <p>When enabled, you always get a spacer line between commands once cleanup runs.</p>"},{"location":"reference/commands/#prompt-cleanup-empty-line","title":"prompt-cleanup-empty-line","text":"<p>Insert an extra empty line while cleanup runs. This is useful when you want one blank line before and after prompts in transcripts.</p> <pre><code>cjshopt prompt-cleanup-empty-line on\ncjshopt prompt-cleanup-empty-line off\n</code></pre>"},{"location":"reference/commands/#prompt-cleanup-truncate","title":"prompt-cleanup-truncate","text":"<p>Collapse multiline prompts to a single line after a command has executed so the previous prompt does not dominate your scrollback.</p> <pre><code>cjshopt prompt-cleanup-truncate on\ncjshopt prompt-cleanup-truncate off\n</code></pre> <p>All prompt-cleanup toggles accept <code>status</code> to report their current state and can be persisted by adding the commands to <code>~/.cjshrc</code>.</p>"},{"location":"reference/commands/#right-prompt-follow-cursor","title":"right-prompt-follow-cursor","text":"<p>Make the inline right prompt (<code>RPS1</code>/<code>RPROMPT</code>) follow the cursor row while editing multi-line input. When disabled (default), the right prompt always renders on the first line even if the cursor moves down the buffer.</p> <pre><code>cjshopt right-prompt-follow-cursor on\ncjshopt right-prompt-follow-cursor off\ncjshopt right-prompt-follow-cursor status\n</code></pre> <p>Enabling the toggle keeps status blocks such as clocks or Git metadata aligned with the active input line, which is especially helpful for long pipelines that wrap across multiple rows.</p>"},{"location":"reference/completions/","title":"Completion Authoring","text":""},{"location":"reference/completions/#completion-authoring-guide","title":"Completion Authoring Guide","text":"<p>CJ's Shell ships with a hybrid completion engine: built-ins are documented in-code, while external commands learn their options and subcommands automatically by reading their manual pages. This guide explains how that pipeline works and how to author or override completion data when you need to fill in gaps or add custom behaviour.</p>"},{"location":"reference/completions/#how-automatic-completions-are-generated","title":"How automatic completions are generated","text":"<ul> <li>On-demand scraping: The first time you request completions for an external command that   resolves in <code>PATH</code>, cjsh invokes <code>man -P cat &lt;command&gt;</code> (falling back to <code>man &lt;command&gt;</code>) and   scrapes the result. The parser looks for <code>OPTIONS</code>, <code>COMMANDS</code>, or <code>SUBCOMMANDS</code> sections, pulls   out option switches and subcommand names, and condenses their descriptions to a single line.</li> <li>Caching: Parsed data is written to <code>~/.cache/cjsh/generated_completions/&lt;command&gt;.txt</code>. The   next completion request loads this cache instead of invoking <code>man</code> again. Cache entries also store   a short summary that feeds inline help and completion source hints.</li> <li>Nested commands: When a completion entry includes subcommands, cjsh will look for additional   caches named <code>&lt;command&gt;-&lt;subcommand&gt;.txt</code> and merge their contents. This is how <code>git-remote</code>   completions are chained into <code>git</code>.</li> <li>Bulk generation: The <code>generate-completions</code> builtin pre-populates caches for an entire <code>PATH</code>   or a list of commands. By default it forces regeneration (<code>--force</code>); pass <code>--no-force</code> to keep   existing manual edits. Use <code>-j/--jobs</code> to parallelise scraping and <code>--quiet</code> to suppress per   command status output.</li> </ul>"},{"location":"reference/completions/#controlling-automatic-learning","title":"Controlling automatic learning","text":"<p>Scraping man pages on the fly is convenient, but it can consume CPU, spawn short-lived <code>man</code> processes, and keep memory allocations around until the session ends. When you prefer a predictable footprint, turn learning off and rely exclusively on whatever is already cached (or on <code>generate-completions</code>).</p> <ul> <li>Run <code>cjshopt completion-learning off</code> during a session to stop future man-page lookups. The toggle   persists across restarts if you add <code>cjshopt completion-learning off</code> to <code>~/.cjshrc</code>.</li> <li>Launch cjsh with <code>--no-completion-learning</code> (or add <code>cjshopt login-startup-arg --no-completion-learning</code>   to <code>~/.cjprofile</code>) to start with learning disabled from the first prompt.</li> <li>The <code>generate-completions</code> builtin continues to work either way, so you can keep caches warm with a   one-time run and leave learning off during normal interactive use.</li> <li>When <code>CJSH_MAN_PATH</code> is set, cjsh always uses that <code>man</code> binary (even outside secure mode).</li> <li>In secure mode (<code>--secure</code>), cjsh only uses <code>CJSH_MAN_PATH</code>. If it is unset or invalid, scraping   is skipped and cjsh relies on cached data.</li> </ul> <p>If a man page cannot be read (missing <code>man</code>, atypical formatting, or sandbox restrictions), cjsh creates an empty cache entry. You can delete that file or replace it with a manual definition.</p>"},{"location":"reference/completions/#cache-layout-and-file-format","title":"Cache layout and file format","text":"<p>Each cache file is plain text:</p> <pre><code>generated by cjsh from man page for git\nsummary: the stupid content tracker\nS   add Record changes to the repository\nS   commit  Record changes to the repository\nO   --amend Reuse and edit the last commit\nO   --patch Interactively choose hunks to stage\n</code></pre> <p>Key points:</p> <ul> <li>The header line must stay exactly <code>generated by cjsh from man page for &lt;command&gt;</code> or cjsh will   ignore the file.</li> <li>The second line contains the summary. Leave it blank after <code>summary:</code> if you do not want one.</li> <li>Subsequent lines are tab separated. Use <code>S</code> for subcommands and <code>O</code> for options.</li> <li>Values are case-insensitive in matching but should be written the way you want them to appear to   users. Tabs inside descriptions are converted to spaces.</li> <li>File names are normalised to lower-case with non-alphanumeric characters translated to <code>_</code>. Let   <code>generate-completions</code> create the skeleton once if you are unsure about the exact spelling.</li> </ul>"},{"location":"reference/completions/#authoring-or-overriding-completions-manually","title":"Authoring or overriding completions manually","text":"<ol> <li>Create the cache directory (once): <code>generate-completions</code> or the first automatic scrape will    do this, but you can also <code>mkdir -p ~/.cache/cjsh/generated_completions</code> yourself.</li> <li>Seed a template (optional): Run <code>generate-completions --no-force &lt;command&gt;</code> to create the    cache without overwriting existing edits. Even if scraping fails, the command establishes the    correct file name for you to edit.</li> <li>Edit the cache file: Open <code>~/.cache/cjsh/generated_completions/&lt;sanitised-name&gt;.txt</code> and    adjust the summary or add new lines using the format above.</li> <li>Add multi-level entries: For subcommand specific completions (e.g. <code>kubectl get</code>), create a    second file named <code>kubectl-get.txt</code> with its own header, summary, and entries. cjsh stitches these    together automatically when you tab complete.</li> <li>Preserve your changes: Future runs of <code>generate-completions</code> default to <code>--force</code>. Use    <code>generate-completions --no-force ...</code> when you want to refresh other commands without clobbering    manual content, or keep a copy of the file under version control and reapply as needed.</li> </ol> <p>You can delete a cache file to force cjsh to rescrape the man page on the next completion request. This is useful after upgrading a tool with new options.</p>"},{"location":"reference/completions/#tips-and-troubleshooting","title":"Tips and troubleshooting","text":"<ul> <li>Commands without man pages: Some utilities only provide <code>--help</code>. Create the cache file   manually or point <code>generate-completions</code> at a packaged man page (for example, install the   corresponding <code>*-doc</code> package).</li> <li>Unusual formatting: If the parser misses options, check the rendered man page. Options that do   not start with <code>-</code> or subcommands listed outside dedicated sections may need to be added manually.</li> <li>Custom summaries: Inline help uses the summary line. Tailor it to the way you present the   command in your prompts or completion preview.</li> <li>Refreshing everything: Remove <code>~/.cache/cjsh/generated_completions</code> or run   <code>generate-completions --force</code> to rebuild all caches. Beware this overwrites manual edits.</li> <li>Sandboxed environments: If <code>man</code> is unavailable, completions fall back to whatever data already   exists. Consider bundling cache files with your dotfiles so they can be copied into the cache   directory during provisioning.</li> <li>Too many matches? Reduce menu noise with <code>cjshopt set-completion-max &lt;number|default|status&gt;</code>   (any value &gt;= 1).</li> </ul> <p>With these tools you can match or exceed the curated completion sets provided by fish, bash, or zsh while keeping cjsh's zero-dependency footprint.</p>"},{"location":"reference/editing/","title":"Interactive Editing","text":""},{"location":"reference/editing/#interactive-line-editing","title":"Interactive Line Editing","text":"<p>CJ's Shell uses the isocline line editor library to provide a powerful and feature-rich interactive editing experience. This document details all editing features currently available in cjsh.</p>"},{"location":"reference/editing/#overview","title":"Overview","text":"<p>Isocline is a modern, pure C line editing library that provides advanced terminal interaction capabilities. CJ's Shell leverages and extends isocline to offer:</p> <ul> <li>Multiline editing with intelligent indentation</li> <li>Real-time syntax highlighting</li> <li>Context-aware tab completion</li> <li>Inline hints and preview suggestions</li> <li>Customizable key bindings</li> <li>Line numbering for multiline input</li> <li>Optional visible markers for whitespace characters</li> <li>History search and management</li> <li>Brace matching and auto-insertion</li> <li>Spell correction</li> <li>Fish-style abbreviations (automatic expansion on word boundaries)</li> </ul> <p>All of these features can be configured through the <code>cjshopt</code> command or in your <code>~/.cjshrc</code> configuration file.</p>"},{"location":"reference/editing/#core-editing-features","title":"Core Editing Features","text":""},{"location":"reference/editing/#multiline-input","title":"Multiline Input","text":"<p>CJ's Shell supports seamless multiline input for complex commands, heredocs, and incomplete statements.</p> <p>Features: - Automatic continuation when lines are incomplete - Smart indentation that aligns with the initial prompt - Line numbers for easy navigation - Both absolute and relative line numbering modes</p> <p>Configuration: </p><pre><code># Enable/disable multiline input (enabled by default)\ncjshopt multiline on|off|status\n\n# Enable/disable automatic indentation (enabled by default)\ncjshopt multiline-indent on|off|status\n\n# Configure how many prompt lines are shown before typing (default: 1)\ncjshopt multiline-start-lines &lt;count|status&gt;\n</code></pre><p></p> <p>Multiline Detection: CJ's Shell automatically enters multiline mode when: - A line ends with a backslash (<code>\\</code>) - Quotes are unclosed (<code>\"</code>, <code>'</code>, or backticks) - Control structures are incomplete (<code>if</code>, <code>while</code>, <code>for</code>, <code>case</code>, etc.) - Heredocs are being entered (<code>&lt;&lt;</code>, <code>&lt;&lt;-</code>) - Brackets/braces/parentheses are unclosed</p>"},{"location":"reference/editing/#line-numbers","title":"Line Numbers","text":"<p>When in multiline mode, line numbers help track your position in the input.</p> <p>Modes: - Absolute numbering: Shows actual line numbers (1, 2, 3, ...) - Relative numbering: Shows distance from current line (0 for current, \u00b1N for others)</p> <p>Configuration: </p><pre><code># Enable absolute line numbers (default)\ncjshopt line-numbers on\ncjshopt line-numbers absolute\n\n# Enable relative line numbers\ncjshopt line-numbers relative\n\n# Disable line numbers\ncjshopt line-numbers off\n\n# Check current status\ncjshopt line-numbers status\n</code></pre><p></p> <p>Tip: Custom continuation prompts normally suppress multiline line numbers. Restore them by running <code>cjshopt line-numbers-continuation on</code> (or calling <code>ic_enable_line_numbers_with_continuation_prompt(true)</code> from your startup scripts) before the editor initializes.</p> <p>Multi-line prompts that render banners or status lines can swap the final PS1 row with the numeric gutter so that every editable line begins with <code>1|</code>, <code>2|</code>, etc. Enable this behavior with:</p> <pre><code>cjshopt line-numbers-replace-prompt on|off|status\n</code></pre> <p>The replacement only applies when line numbers are visible (and, if <code>PS2</code> is set, when <code>cjshopt line-numbers-continuation on</code> is active).</p> <p>Current Line Highlighting: The line containing the cursor can be highlighted differently: </p><pre><code># Enable/disable current line number highlighting (enabled by default)\ncjshopt current-line-number-highlight on|off|status\n</code></pre><p></p> <p>The line number styles can be customized: - <code>ic-linenumbers</code>: Style for regular line numbers - <code>ic-linenumber-current</code>: Style for the current line number</p>"},{"location":"reference/editing/#visible-whitespace-markers","title":"Visible Whitespace Markers","text":"<p>You can visualize whitespace characters while editing to spot stray spaces or indentation issues. When enabled, spaces are rendered using a subtle middle-dot marker.</p> <p>Configuration: </p><pre><code># Show or hide visible whitespace markers (disabled by default)\ncjshopt visible-whitespace on|off|status\n</code></pre><p></p> <p>Pair this option with custom styling via <code>cjshopt style_def ic-whitespace-char \"&lt;style&gt;\"</code> to adjust the marker color.</p>"},{"location":"reference/editing/#syntax-highlighting","title":"Syntax Highlighting","text":"<p>Real-time syntax highlighting provides visual feedback as you type.</p> <p>Highlighted Elements: - Commands (builtins, executables, aliases) - Keywords (<code>if</code>, <code>then</code>, <code>else</code>, <code>while</code>, <code>for</code>, etc.) - Strings (single and double quoted) - Variables and parameter expansions - Operators (pipes, redirections, logical operators) - Comments - Errors (unmatched quotes, invalid syntax)</p> <p>Configuration: </p><pre><code># Enable/disable syntax highlighting (enabled by default)\n# Note: Can also be controlled with --no-syntax-highlighting flag\n\n# Customize highlighting styles\ncjshopt style_def &lt;token_type&gt; &lt;style&gt;\n</code></pre><p></p> <p>Available Style Names: - <code>ic-keyword</code>: Shell keywords - <code>ic-command</code>: Valid commands - <code>ic-error</code>: Invalid commands or syntax errors - <code>ic-string</code>: String literals - <code>ic-comment</code>: Comments - <code>ic-operator</code>: Operators - <code>ic-variable</code>: Variables - <code>ic-number</code>: Numeric literals - <code>ic-bracket</code>: Brackets and braces - <code>ic-bracket-match</code>: Matching bracket pairs</p> <p>Syntax Highlighting Control: The syntax highlighter can be temporarily disabled with the <code>--no-syntax-highlighting</code> startup flag.</p>"},{"location":"reference/editing/#completion-system","title":"Completion System","text":"<p>CJ's Shell features a sophisticated completion system that provides context-aware suggestions.</p> <p>Completion Types: - Command completion: Completes commands from PATH, builtins, aliases, and functions - File/directory completion: Completes paths with proper quoting and escaping - Variable completion: Completes shell variable names - User completion: Completes usernames (after <code>~</code>) - Hostname completion: Completes hostnames (for ssh, scp, etc.)</p> <p>Features: - Fuzzy matching for typo tolerance - Frequency-based ranking (commonly used completions appear first) - Source attribution (shows where completions come from) - Preview of selected completion - Automatic expansion with auto-tab</p> <p>Need to author new entries or override the defaults? Check the Completion Authoring Guide for cache formats, nested command support, and manual customization tips.</p> <p>Configuration: </p><pre><code># Enable/disable completion preview (enabled by default)\ncjshopt completion-preview on|off|status\n\n# Enable/disable auto-tab (disabled by default)\n# Auto-tab automatically completes unique prefixes\ncjshopt auto-tab on|off|status\n\n# Configure case sensitivity (enabled by default)\ncjshopt completion-case on|off|status\n\n# Enable/disable spell correction (enabled by default)\ncjshopt completion-spell on|off|status\n\n# Cap the number of suggestions shown per request (default: 1000, no upper limit)\ncjshopt set-completion-max &lt;number|default|status&gt;\n</code></pre><p></p> <p>Lower or raise the completion cap (any value &gt;= 1) to keep the menu focused when working inside directories that contain thousands of files or deeply nested command trees.</p> <p>Using Completions: - Press <code>Tab</code> to show completions - Press <code>Tab</code> again to cycle through options - Use arrow keys to navigate the completion menu - Press <code>Enter</code> to accept a completion - Press <code>Esc</code> to cancel</p>"},{"location":"reference/editing/#hints-and-inline-help","title":"Hints and Inline Help","text":"<p>CJ's Shell provides inline hints and help to assist with command input.</p> <p>Hints: When there's a single possible completion, a hint is displayed inline with dimmed text.</p> <p>Features: - Shows the rest of the word being typed - Appears after a configurable delay - Can be accepted by pressing \u2192 (right arrow)</p> <p>Configuration: </p><pre><code># Enable/disable hints (enabled by default)\ncjshopt hint on|off|status\n\n# Set hint delay in milliseconds (0ms by default)\ncjshopt hint-delay &lt;milliseconds&gt;\n</code></pre><p></p> <p>Inline Help: Short help messages are displayed for certain operations: - History search instructions - Completion menu navigation - Special key binding hints</p> <p>Configuration: </p><pre><code># Enable/disable inline help (enabled by default)\ncjshopt inline-help on|off|status\n</code></pre><p></p> <p>Status Hint Banner: Configure when the underlined shortcut banner (<code>complete</code>, <code>history search</code>, <code>help</code>, etc.) shows up.</p> <pre><code>cjshopt status-hints &lt;off|normal|transient|persistent|status&gt;\n</code></pre> <ul> <li><code>off</code> \u2013 hide the banner entirely.</li> <li><code>normal</code> (default) \u2013 display it only when both the input buffer and status line are empty.</li> <li><code>transient</code> \u2013 show it whenever no other status message is present.</li> <li><code>persistent</code> \u2013 always prepend it above any status output.</li> </ul> <p>Status Line Visibility: Hide the entire status area\u2014syntax validation, inline diagnostics, and the hint banner\u2014with a single toggle.</p> <pre><code>cjshopt status-line on|off|status\n</code></pre> <ul> <li><code>on</code> (default) \u2013 keep validation messages and banners visible.</li> <li><code>off</code> \u2013 remove the status row entirely; <code>status-hints</code> preferences are remembered but stay hidden until you turn the line back on.</li> </ul> <p>cjsh Status Reporting: Prefer to keep the status line for banners but hide validation/error text? Toggle the built-in reporting channel.</p> <pre><code>cjshopt status-reporting on|off|status\n</code></pre> <ul> <li><code>on</code> (default) \u2013 show syntax validation results beneath the prompt.</li> <li><code>off</code> \u2013 suppress cjsh-generated status text while still allowing <code>status-hints</code> (or custom status callbacks) to render.</li> </ul> <p>Full Help: Press <code>F1</code> at any time to display the complete key binding cheat sheet, regardless of the inline-help setting.</p>"},{"location":"reference/editing/#fish-style-abbreviations","title":"Fish-Style Abbreviations","text":"<p>CJ's Shell supports fish-style abbreviations that expand typed shortcuts into longer phrases as soon as you type a whitespace character or submit the line. This is powered directly by the isocline editor, so expansions happen inline without disrupting your cursor position or undo history.</p> <p>Usage: - Define abbreviations with the <code>abbr</code> builtin: <code>abbr gs='git status --short --branch'</code> - Remove them with <code>unabbr</code>: <code>unabbr gs</code> - List all active abbreviations by running <code>abbr</code> with no arguments</p> <p>Behavior: - Triggers expand when followed by a space, tab, newline, or when you press <code>Enter</code> - Expansion text is inserted in place of the trigger, preserving subsequent input - Abbreviations live in the current shell session and persist across reads within that session</p> <p>Defaults: - <code>abbr</code> \u2192 <code>abbreviate</code> - <code>unabbr</code> \u2192 <code>unabbreviate</code></p> <p>Add <code>abbr</code> definitions to your <code>~/.cjshrc</code> to load them automatically on startup.</p>"},{"location":"reference/editing/#brace-matching-and-auto-insertion","title":"Brace Matching and Auto-Insertion","text":"<p>Visual feedback for matching brackets, braces, and parentheses.</p> <p>Brace Matching: When the cursor is next to a brace, its matching pair is highlighted. Unmatched braces are highlighted as errors.</p> <p>Default Brace Pairs: - Parentheses: <code>()</code> - Square brackets: <code>[]</code> - Curly braces: <code>{}</code></p> <p>Auto-Insertion: When you type an opening brace, the closing brace is automatically inserted (enabled by default).</p> <p>Default Auto-Insertion Pairs: - Parentheses: <code>()</code> - Square brackets: <code>[]</code> - Curly braces: <code>{}</code> - Double quotes: <code>\"\"</code> - Single quotes: <code>''</code></p> <p>Note: Brace matching and auto-insertion are currently controlled by isocline's default settings and cannot be configured via <code>cjshopt</code>, but the feature is active.</p>"},{"location":"reference/editing/#history-management","title":"History Management","text":""},{"location":"reference/editing/#history-features","title":"History Features","text":"<p>CJ's Shell maintains a persistent command history with advanced search capabilities.</p> <p>Features: - Persistent history across sessions - Configurable maximum entries - Duplicate suppression - History expansion (<code>!</code>, <code>!!</code>, <code>!$</code>, etc.) - Incremental search</p> <p>Configuration: </p><pre><code># Set maximum history entries\ncjshopt set-history-max &lt;number&gt;\n\n# Use default history size\ncjshopt set-history-max default\n\n# Check current setting\ncjshopt set-history-max status\n</code></pre><p></p> <p>History File: History is stored at <code>~/.cache/cjsh/history.txt</code>. Each entry is prefixed by a metadata line in the form <code># &lt;unix_timestamp&gt; &lt;exit_code&gt;</code>, where an exit code of <code>-1</code> indicates that the status was not recorded (for example, when entries are injected programmatically).</p> <p>Duplicate Handling: By default, duplicate entries are not stored in history to keep it clean and relevant.</p>"},{"location":"reference/editing/#history-search","title":"History Search","text":"<p>Incremental Search (Ctrl+R): 1. Press <code>Ctrl+R</code> to enter search mode 2. Type to search through history 3. Press <code>Ctrl+R</code> again to find the next match 4. Press <code>Enter</code> to execute the found command 5. Press <code>Esc</code> to cancel search</p> <p>History Navigation: - <code>\u2191</code> (Up Arrow): Previous command - <code>\u2193</code> (Down Arrow): Next command - <code>Alt+&lt;</code>: Jump to oldest history entry - <code>Alt+&gt;</code>: Jump to newest history entry</p> <p>Control whether the fuzzy history search menu matches case-sensitively with <code>cjshopt history-search-case &lt;on|off|status&gt;</code> or press <code>Alt+C</code> inside the menu to flip modes on the fly. Turning case sensitivity off lets uppercase queries (for example, <code>LS</code>) match lowercase history entries (<code>ls</code>) when filtering.</p>"},{"location":"reference/editing/#key-bindings","title":"Key Bindings","text":"<p>CJ's Shell supports customizable key bindings with multiple profiles.</p>"},{"location":"reference/editing/#key-binding-profiles","title":"Key Binding Profiles","text":"<p>Available Profiles: - <code>emacs</code>: Emacs-style key bindings (default) - <code>vi</code>: Vi/Vim-style key bindings</p> <p>Set Profile: </p><pre><code>cjshopt keybind profile set emacs|vi\n</code></pre><p></p>"},{"location":"reference/editing/#common-key-bindings-emacs-mode","title":"Common Key Bindings (Emacs Mode)","text":""},{"location":"reference/editing/#cursor-movement","title":"Cursor Movement","text":"<ul> <li><code>Ctrl+A</code>: Move to beginning of line</li> <li><code>Ctrl+E</code>: Move to end of line</li> <li><code>Ctrl+F</code> / <code>\u2192</code>: Move forward one character</li> <li><code>Ctrl+B</code> / <code>\u2190</code>: Move backward one character</li> <li><code>Alt+F</code>: Move forward one word</li> <li><code>Alt+B</code>: Move backward one word</li> <li><code>\u2191</code>: Previous line (or previous history)</li> <li><code>\u2193</code>: Next line (or next history)</li> </ul>"},{"location":"reference/editing/#editing","title":"Editing","text":"<ul> <li><code>Ctrl+D</code>: Delete character under cursor (or exit if line is empty)</li> <li><code>Ctrl+H</code> / <code>Backspace</code>: Delete character before cursor</li> <li><code>Ctrl+W</code>: Delete word before cursor</li> <li><code>Alt+D</code>: Delete word after cursor</li> <li><code>Ctrl+U</code>: Delete from cursor to beginning of line</li> <li><code>Ctrl+K</code>: Delete from cursor to end of line</li> <li><code>Ctrl+Y</code>: Paste (yank) last deleted text</li> <li><code>Ctrl+T</code>: Transpose characters</li> <li><code>Alt+T</code>: Transpose words</li> </ul>"},{"location":"reference/editing/#history","title":"History","text":"<ul> <li><code>Ctrl+R</code>: Open the fuzzy history search menu (reverse search)</li> <li><code>Ctrl+S</code>: Open the fuzzy history search menu (forward search)</li> <li><code>Alt+C</code>: Toggle case sensitivity while the fuzzy history search menu is open</li> <li><code>\u2191</code>: Previous history entry</li> <li><code>\u2193</code>: Next history entry</li> <li><code>Alt+&lt;</code>: First history entry</li> <li><code>Alt+&gt;</code>: Last history entry</li> </ul>"},{"location":"reference/editing/#completion","title":"Completion","text":"<ul> <li><code>Tab</code>: Trigger completion / cycle through completions</li> <li><code>Shift+Tab</code>: Cycle backward through completions</li> </ul>"},{"location":"reference/editing/#special","title":"Special","text":"<ul> <li><code>Ctrl+C</code>: Cancel current input</li> <li><code>Ctrl+D</code>: Exit shell (when buffer is empty)</li> <li><code>Ctrl+L</code>: Clear screen</li> <li><code>Enter</code>: Execute command</li> <li><code>F1</code>: Show help / key binding cheat sheet</li> <li><code>Esc</code>: Cancel operation</li> </ul>"},{"location":"reference/editing/#custom-key-bindings","title":"Custom Key Bindings","text":"<p>You can inspect and customize key bindings through the <code>cjshopt keybind</code> subcommands:</p> <pre><code># List all current key bindings (safe at runtime)\ncjshopt keybind list\n\n# Show available key binding profiles\ncjshopt keybind profile list\n\n# Activate a key binding profile (add to ~/.cjshrc to persist)\ncjshopt keybind profile set vi\n\n# Replace bindings for an action (config file only)\ncjshopt keybind set cursor-left ctrl-h|left\n\n# Add bindings without removing existing ones (config file only)\ncjshopt keybind add delete-word-end alt-d\n\n# Remove specific key bindings (config file only)\ncjshopt keybind clear ctrl-h ctrl-b\n\n# Remove all custom bindings for an action (config file only)\ncjshopt keybind clear-action delete-word-end\n\n# Restore default bindings (config file only)\ncjshopt keybind reset\n</code></pre> <p>Key Specification Format: - <code>ctrl-&lt;key&gt;</code>: Control key combinations (e.g., <code>ctrl-a</code>) - <code>alt-&lt;key&gt;</code>: Alt/Meta key combinations (e.g., <code>alt-f</code>) - <code>shift-&lt;key&gt;</code>: Shift key combinations (e.g., <code>shift-tab</code>) - <code>f&lt;N&gt;</code>: Function keys (e.g., <code>f1</code>, <code>f12</code>) - <code>&lt;key&gt;</code>: Regular keys (e.g., <code>tab</code>, <code>enter</code>)</p>"},{"location":"reference/editing/#command-driven-key-bindings","title":"Command-Driven Key Bindings","text":"<p>Use the extended key binding namespace to trigger shell commands directly from key presses:</p> <pre><code># List custom command key bindings (safe at runtime)\ncjshopt keybind ext list\n\n# Bind Ctrl+G to run a command (add to ~/.cjshrc)\ncjshopt keybind ext set ctrl-g 'cjsh-widget accept'\n\n# Remove a command binding\ncjshopt keybind ext clear ctrl-g\n\n# Clear every custom command binding\ncjshopt keybind ext reset\n</code></pre> <p>Command key bindings typically leverage the <code>cjsh-widget</code> builtin to read or modify editor state. As with standard bindings, modifications must be placed in configuration files; inspection commands can run interactively, but setters only take effect during startup.</p>"},{"location":"reference/editing/#prompt-customization","title":"Prompt Customization","text":""},{"location":"reference/editing/#prompt-cleanup","title":"Prompt Cleanup","text":"<p>Control how the prompt is displayed after accepting input.</p> <p>Features: - Removes full prompt and shows only trailing segment - Optional empty line insertion - Multiline truncation</p> <p>Configuration: Tune cleanup behavior with the <code>cjshopt prompt-cleanup</code>, <code>prompt-cleanup-newline</code>, <code>prompt-cleanup-empty-line</code>, <code>prompt-cleanup-truncate</code>, and <code>prompt-newline</code> toggles. Add the desired commands to your startup files (typically <code>~/.cjshrc</code>) to keep the settings persistent.</p>"},{"location":"reference/editing/#prompt-markers","title":"Prompt Markers","text":"<p>The prompt system uses markers to indicate different states:</p> <p>Primary Prompt Marker: Displayed at the end of the main prompt (default: <code>\"&gt; \"</code>).</p> <p>Continuation Prompt Marker: Displayed for continuation lines in multiline input.</p> <p>Customization: Define these markers directly inside <code>PS1</code>, <code>PS2</code>, and any helper functions you call from <code>PROMPT_COMMAND</code>.</p>"},{"location":"reference/editing/#terminal-features","title":"Terminal Features","text":""},{"location":"reference/editing/#color-support","title":"Color Support","text":"<p>CJ's Shell automatically detects terminal capabilities:</p> <p>Color Depth Detection: - Monochrome (1-bit) - 8 colors (3-bit) with bold for bright - 16 colors (4-bit) - 256 colors (8-bit) - True color (24-bit RGB)</p> <p>Environment Variables: - <code>COLORTERM</code>: Indicates color capability (<code>truecolor</code>, <code>24bit</code>, <code>256color</code>, etc.)</p> <p>Disable Colors: Use the <code>--no-colors</code> flag or set <code>TERM=dumb</code> to disable all color output.</p>"},{"location":"reference/editing/#bbcode-formatting","title":"BBCode Formatting","text":"<p>CJ's Shell supports BBCode-style formatting in prompts and output:</p> <p>Tags: - <code>[b]...[/b]</code>: Bold text - <code>[i]...[/i]</code>: Italic text - <code>[u]...[/u]</code>: Underline text - <code>[r]...[/r]</code>: Reverse video - <code>[color]...[/color]</code>: Color names (e.g., <code>[red]</code>, <code>[blue]</code>) - <code>[#RRGGBB]...[/]</code>: Hex RGB colors - <code>[on color]...[/]</code>: Background colors</p> <p>Style Combinations: </p><pre><code>[b red on blue]Bold red text on blue background[/]\n[i #ff00ff]Italic magenta text[/]\n</code></pre><p></p>"},{"location":"reference/editing/#advanced-features","title":"Advanced Features","text":""},{"location":"reference/editing/#spell-correction","title":"Spell Correction","text":"<p>Automatic spell correction for commands and completions.</p> <p>How It Works: When no exact match is found, cjsh attempts to find the closest match using edit distance algorithms.</p> <p>Configuration: </p><pre><code># Enable/disable spell correction (enabled by default)\ncjshopt completion-spell on|off|status\n</code></pre><p></p>"},{"location":"reference/editing/#heredoc-support","title":"Heredoc Support","text":"<p>Full editing capabilities when entering heredocs:</p> <pre><code>cat &lt;&lt;EOF\n# You get full editing features here:\n# - Syntax highlighting\n# - Multiline editing\n# - History access\n# - All normal key bindings\nEOF\n</code></pre> <p>Features: - Each line is edited with full isocline capabilities - Supports <code>&lt;&lt;-</code> (strip leading tabs) - Delimiter detection ends input - Ctrl+C/Ctrl+D cancels heredoc input</p>"},{"location":"reference/editing/#readline-integration","title":"Readline Integration","text":"<p>CJ's Shell uses isocline's unified <code>ic_readline()</code> API for input, which provides:</p> <p>Inline Right Text: Prompts can display additional information on the right side of the input line when you embed markup in <code>RPS1</code>/<code>RPROMPT</code> or inject text via <code>PROMPT_COMMAND</code>.</p> <p>Initial Input: Commands can pre-populate the input buffer (used by <code>fc</code> command for editing).</p> <p>Special Return Values: - <code>IC_READLINE_TOKEN_CTRL_C</code>: Returned when Ctrl+C is pressed on empty buffer - <code>IC_READLINE_TOKEN_CTRL_D</code>: Returned when Ctrl+D is pressed on empty buffer (EOF)</p>"},{"location":"reference/editing/#non-tty-mode","title":"Non-TTY Mode","text":"<p>When standard input is not a terminal (pipe, file redirect, debugger, etc.): - Line editing is disabled - Input is read directly from the stream - Prompts are still displayed but without styling - Scripts and pipes work seamlessly</p>"},{"location":"reference/editing/#style-definitions","title":"Style Definitions","text":"<p>All visual aspects of the editor can be customized through style definitions.</p>"},{"location":"reference/editing/#available-styles","title":"Available Styles","text":"<p>Prompt Styles: - <code>ic-prompt</code>: Main prompt text - <code>ic-linenumbers</code>: Line numbers in multiline mode - <code>ic-linenumber-current</code>: Current line number highlight</p> <p>Syntax Highlighting Styles: - <code>ic-keyword</code>: Shell keywords - <code>ic-command</code>: Valid commands - <code>ic-error</code>: Errors and invalid commands - <code>ic-string</code>: String literals - <code>ic-comment</code>: Comments - <code>ic-operator</code>: Operators - <code>ic-variable</code>: Variables - <code>ic-number</code>: Numbers - <code>ic-bracket</code>: Brackets - <code>ic-bracket-match</code>: Matching brackets</p> <p>Editor Styles: - <code>ic-hint</code>: Inline hints - <code>ic-selection</code>: Selected text - <code>ic-completion</code>: Completion menu - <code>ic-completion-selected</code>: Selected completion</p>"},{"location":"reference/editing/#style-syntax","title":"Style Syntax","text":"<pre><code>cjshopt style_def &lt;style-name&gt; \"&lt;bbcode-style&gt;\"\n</code></pre> <p>Examples: </p><pre><code># Make errors bright red and bold\ncjshopt style_def ic-error \"bold red\"\n\n# Use custom RGB color for commands\ncjshopt style_def ic-command \"#00ff00\"\n\n# Style keywords with italic blue\ncjshopt style_def ic-keyword \"italic blue\"\n\n# Combine multiple attributes\ncjshopt style_def ic-string \"italic #ffaa00\"\n</code></pre><p></p> <p>Style Attributes: - Colors: <code>red</code>, <code>blue</code>, <code>green</code>, <code>yellow</code>, <code>cyan</code>, <code>magenta</code>, <code>white</code>, <code>black</code> - ANSI colors: <code>ansi-red</code>, <code>ansi-bright-blue</code>, etc. - RGB colors: <code>#RRGGBB</code> or <code>#RGB</code> - Attributes: <code>bold</code>, <code>italic</code>, <code>underline</code>, <code>reverse</code> - Underline color only: <code>underline-color=&lt;color&gt;</code> or <code>ansi-underline-color=&lt;idx&gt;</code> (also accepts     shorthand <code>ulcolor</code>) - Background: <code>on &lt;color&gt;</code></p>"},{"location":"reference/editing/#configuration-examples","title":"Configuration Examples","text":""},{"location":"reference/editing/#complete-editing-configuration","title":"Complete Editing Configuration","text":"<p>Here's a comprehensive example for <code>~/.cjshrc</code>:</p> <pre><code># Multiline settings\ncjshopt multiline on\ncjshopt multiline-indent on\ncjshopt line-numbers relative\ncjshopt current-line-number-highlight on\n\n# Completion settings\ncjshopt completion-preview on\ncjshopt auto-tab off\ncjshopt completion-case off  # Case-insensitive completions\ncjshopt completion-spell on\n\n# Hint settings\ncjshopt hint on\ncjshopt hint-delay 100  # 100ms delay before showing hints\n\n# Help settings\ncjshopt inline-help on\n\n# History\ncjshopt set-history-max 10000\n\n# Key bindings\ncjshopt keybind profile set emacs\n\n# Syntax highlighting styles\ncjshopt style_def ic-keyword \"bold blue\"\ncjshopt style_def ic-command \"green\"\ncjshopt style_def ic-error \"bold red\"\ncjshopt style_def ic-string \"#ffaa00\"\ncjshopt style_def ic-comment \"italic #888888\"\ncjshopt style_def ic-operator \"bold\"\n</code></pre>"},{"location":"reference/editing/#minimal-configuration","title":"Minimal Configuration","text":"<p>For a minimal, fast setup (<code>--minimal</code> disables prompt themes/colors, completions, syntax highlighting, smart <code>cd</code>, rc sourcing, the title line, history expansion, multiline line numbers, and auto-indentation):</p> <pre><code># Use the --minimal flag at startup, or configure selectively:\ncjshopt multiline on\ncjshopt line-numbers off\ncjshopt completion-preview off\ncjshopt hint off\ncjshopt inline-help off\n</code></pre>"},{"location":"reference/editing/#performance-considerations","title":"Performance Considerations","text":""},{"location":"reference/editing/#optimization-tips","title":"Optimization Tips","text":"<ol> <li>Disable unnecessary features in resource-constrained environments</li> <li>Increase hint delay if experiencing lag while typing</li> <li>Reduce history size for faster search</li> <li>Use simpler prompt markup to reduce rendering time</li> </ol>"},{"location":"reference/editing/#benchmarks","title":"Benchmarks","text":"<p>Isocline is designed to be fast and responsive: - Completion generation: &lt; 10ms for typical cases - Syntax highlighting: Real-time with no noticeable lag - History search: Fast even with large history files - Multiline editing: Smooth for inputs up to hundreds of lines</p>"},{"location":"reference/editing/#troubleshooting","title":"Troubleshooting","text":""},{"location":"reference/editing/#common-issues","title":"Common Issues","text":"<p>Completions not working: - Check if completions are enabled (not started with <code>--no-completions</code>) - Verify PATH contains command directories - Check file permissions</p> <p>Syntax highlighting not showing: - Ensure not started with <code>--no-syntax-highlighting</code> - Check terminal color support - Verify your prompt/style definitions (<code>cjshopt style_def</code>) are loaded</p> <p>Key bindings not working: - Check terminal emulator key sending - Verify with <code>cjshopt keybind list</code> - Some terminals may not support all key combinations</p> <p>Multiline issues: - Verify multiline is enabled: <code>cjshopt multiline status</code> - Check for terminal compatibility - Ensure terminal width is adequate</p>"},{"location":"reference/editing/#getting-help","title":"Getting Help","text":"<ul> <li>Press <code>F1</code> during input for interactive help</li> <li>Run <code>cjshopt &lt;subcommand&gt; --help</code> for command-specific help</li> <li>Check logs in debug mode</li> <li>Report issues on the CJsShell GitHub repository</li> </ul>"},{"location":"reference/features/","title":"Features Overview","text":""},{"location":"reference/features/#features-overview","title":"Features Overview","text":"<p>CJ's Shell (cjsh) pairs a standards-focused POSIX shell engine with a modern interactive experience. The goal is zero-compromise scripting compatibility backed by rich editing tools that require no third-party plugins.</p>"},{"location":"reference/features/#core-shell-engine","title":"Core Shell Engine","text":"<ul> <li>POSIX-first semantics \u2013 Roughly 95% POSIX coverage with &gt;1500 standards-focused tests.</li> <li>Bourne-compatible surface \u2013 Classic constructs (<code>if</code>, <code>case</code>, <code>for</code>, <code>while</code>, functions,     redirections, here-documents, command substitution) behave the way portable scripts expect.</li> <li>POSIX+ extensions \u2013 <code>[[ \u2026 ]]</code>, arithmetic contexts, brace expansion, here-strings, and     process substitution are supported. History expansion stays interactive-only by default.</li> <li>Job control \u2013 Background jobs, <code>fg</code>, <code>bg</code>, <code>jobs</code>, <code>wait</code>, <code>disown</code>, and <code>trap</code> integrate with     the internal process manager so interactive sessions stay responsive. Append <code>&amp;^</code> to a command     to auto-background it on <code>Ctrl+Z</code>, or <code>&amp;^!</code> to auto-background and discard stdout/stderr after     the suspend. <code>set -o huponexit</code> controls whether exiting shells hang up or leave running jobs     alone (default: off, so long-lived helpers keep running until you explicitly stop them).</li> </ul>"},{"location":"reference/features/#interactive-layer","title":"Interactive Layer","text":"<p>Powered by the embedded isocline editor:</p> <ul> <li>Multiline editing with automatic indentation and optional line numbers.</li> <li>Syntax highlighting that understands commands, keywords, paths, arguments, substitutions,     comments, and error states.</li> <li>Fuzzy completions for commands, files, options, variables, users, and hosts. Completions learn     from your <code>PATH</code> and cached man-page metadata.</li> <li>Inline hints &amp; preview with configurable delays, spell correction, and case sensitivity.</li> <li>Advanced history \u2013 reverse search (<code>Ctrl+R</code>), deduplicated persistent history with exit codes,     and bash-style history expansion that auto-disables in non-interactive contexts. Configure     whether the fuzzy history menu matches case-sensitively with <code>cjshopt history-search-case</code> or     flip it on the fly with <code>Alt+C</code> inside the menu.</li> <li>Custom key bindings \u2013 Emacs and Vi profiles plus fine-grained overrides via     <code>cjshopt keybind</code> (including command-driven bindings through <code>cjsh-widget</code>).</li> <li>Typeahead capture \u2013 Keystrokes entered while a command runs are buffered and replayed when the prompt returns so you never lose input.</li> <li>Abbreviations \u2013 <code>abbr</code>/<code>unabbr</code> provide fish-style expansions for frequently typed snippets.</li> </ul> <p>See the Interactive Editing Guide and Completion Authoring Guide for full details.</p>"},{"location":"reference/features/#prompt-visual-styling","title":"Prompt &amp; Visual Styling","text":"<ul> <li>BBCode-inspired markup inside <code>PS1</code>, <code>RPS1</code>/<code>RPROMPT</code>, <code>PS2</code>, and other prompt variables.     Tags such as <code>[b]</code>, <code>[color=hotpink]</code>, <code>[ic-hint]</code>, and <code>[bgcolor=#202020]</code> let you mix ANSI     styles with reusable highlight names. The full markup reference lives in     Prompt Markup and Styling.</li> <li>Prompt cleanup toggles via <code>cjshopt prompt-cleanup*</code> set whether the previous prompt is     removed, whether blank lines are inserted, and whether multiline prompts are truncated.</li> <li>Right prompt cursor tracking \u2013 <code>cjshopt right-prompt-follow-cursor</code> keeps the inline right     prompt aligned with the current cursor row instead of pinning it to the first line.</li> <li><code>cjshopt style_def</code> redefines syntax-highlighter styles (<code>unknown-command</code>, <code>ic-hint</code>, etc.),     instantly applying to both inline highlighting and prompt markup tags that reference them.</li> </ul>"},{"location":"reference/features/#configuration-surface","title":"Configuration Surface","text":"<ul> <li>Runtime toggles \u2013 Every major interactive feature has a <code>cjshopt</code> command. Highlights:<ul> <li><code>cjshopt multiline</code>, <code>cjshopt multiline-indent</code>, <code>cjshopt line-numbers</code>,     <code>cjshopt multiline-start-lines</code></li> <li><code>cjshopt completion-preview</code>, <code>cjshopt completion-case</code>, <code>cjshopt completion-spell</code>,      <code>cjshopt completion-learning</code>, <code>cjshopt auto-tab</code></li> <li><code>cjshopt hint</code>, <code>cjshopt hint-delay</code>, <code>cjshopt inline-help</code>, <code>cjshopt status-hints</code>,     <code>cjshopt status-line</code>, <code>cjshopt status-reporting</code>, <code>cjshopt visible-whitespace</code></li> <li><code>cjshopt prompt-newline</code>, <code>cjshopt prompt-cleanup</code>, <code>cjshopt prompt-cleanup-newline</code>,     <code>cjshopt prompt-cleanup-empty-line</code>, <code>cjshopt prompt-cleanup-truncate</code></li> <li><code>cjshopt keybind \u2026</code> and <code>cjshopt keybind ext \u2026</code> for keymap management</li> <li><code>cjshopt set-history-max</code> to adjust persistent history size (0 or more entries; no upper limit)</li> <li><code>set -o huponexit</code> mirrors bash's option for sending SIGHUP/SIGTERM to background jobs when the     shell exits (off by default so long-running helpers stick around)</li> </ul> </li> <li>Login/startup flags \u2013 Place <code>cjshopt login-startup-arg &lt;flag&gt;</code> lines in <code>~/.cjprofile</code> to     replay command-line switches (<code>--minimal</code>, <code>--no-completions</code>, <code>--show-startup-time</code>, etc.) on     every launch. Flags that are valid on the CLI are respected during profile evaluation.</li> <li>Generated config skeletons \u2013 <code>cjshopt generate-profile</code>, <code>cjshopt generate-rc</code>, and     <code>cjshopt generate-logout</code> create <code>~/.cjprofile</code>, <code>~/.cjshrc</code>, and <code>~/.cjsh_logout</code> (or alternate     locations under <code>~/.config/cjsh/</code>) with sensible defaults.</li> </ul>"},{"location":"reference/features/#startup-files","title":"Startup Files","text":"File When it runs Typical responsibilities <code>~/.cjprofile</code> (or <code>~/.config/cjsh/.cjprofile</code>) Login shells before interactive setup Export environment vars, add <code>cjshopt login-startup-arg</code> flags <code>~/.cjshrc</code> Every interactive shell (unless <code>--no-source</code>) Prompt definitions, aliases, key bindings, abbreviations <code>~/.cjsh_logout</code> When a login shell exits Cleanup hooks, session summaries <p>Persistent caches (history, generated completions, etc.) live under <code>~/.cache/cjsh/</code>.</p>"},{"location":"reference/features/#command-line-flags","title":"Command-line Flags","text":"<p><code>cjsh</code> accepts these switches (short/long forms shown where available):</p> <ul> <li><code>-h, --help</code> \u2013 usage information</li> <li><code>-v, --version</code> \u2013 print the version banner and exit</li> <li><code>-l, --login</code> \u2013 treat the shell as a login shell (source <code>~/.cjprofile</code>)</li> <li><code>-i, --interactive</code> \u2013 force interactive behavior even if stdin is not a tty</li> <li><code>-c, --command=&lt;string&gt;</code> \u2013 execute a single command and exit (disables history expansion)</li> <li><code>-m, --minimal</code> \u2013 disable prompt themes/colors, completions, syntax highlighting, rc sourcing,   smart cd, the title line, history expansion, multiline line numbers, auto-indentation, and the   startup time banner</li> <li><code>-C, --no-colors</code></li> <li><code>-L, --no-titleline</code></li> <li><code>-U, --show-startup-time</code></li> <li><code>-N, --no-source</code></li> <li><code>-O, --no-completions</code></li> <li><code>--no-smart-cd</code></li> <li><code>--no-completion-learning</code> \u2013 keep completions enabled but skip on-demand man-page scraping</li> <li><code>-S, --no-syntax-highlighting</code></li> <li><code>-H, --no-history-expansion</code></li> <li><code>-W, --no-sh-warning</code> \u2013 suppress the reminder shown when cjsh is invoked via <code>sh</code></li> <li><code>-s, --secure</code> \u2013 skip <code>~/.cjprofile</code>, <code>~/.cjshrc</code>, and <code>~/.cjsh_logout</code> entirely</li> <li><code>-X, --startup-test</code> \u2013 diagnostic mode used by the bundled tests</li> </ul> <p>Flags affecting feature toggles take effect early in startup and can also be injected via <code>cjshopt login-startup-arg</code> in configuration files.</p>"},{"location":"reference/features/#built-in-tooling-highlights","title":"Built-in Tooling Highlights","text":"<ul> <li><code>generate-completions</code> \u2013 Pre-populate completion caches by scraping manual pages in parallel.</li> <li><code>hash</code> \u2013 Inspect or reset execution caches.</li> <li><code>history</code> / <code>fc</code> \u2013 Explore, edit, and replay persistent history (exit codes are stored alongside entries).</li> <li><code>hook</code> \u2013 Lightweight precmd/preexec/chpwd hook system.</li> <li><code>cjsh-widget</code> \u2013 Bridge between shell code and the line editor for custom key-driven behaviors.</li> </ul>"},{"location":"reference/features/#performance-characteristics","title":"Performance Characteristics","text":"<ul> <li>Single statically linked executable (vendored dependencies only).</li> <li>Aggressive optimization flags and caching layers (completion caches, prompt helpers, execution     lookup cache).</li> <li>Prompt markup renders quickly because formatting is handled inside the line editor with minimal     allocations.</li> </ul>"},{"location":"reference/features/#platform-build-support","title":"Platform &amp; Build Support","text":"<ul> <li>Targets \u2013 Linux, macOS, and WSL are primary; other POSIX-like systems generally work.</li> <li>Toolchain \u2013 Requires CMake \u22653.25 and a C++17-capable compiler (clang, GCC, or MSVC via WSL).</li> <li>Quick build \u2013 <code>cmake -S . -B build -DCMAKE_BUILD_TYPE=Release &amp;&amp; cmake --build build --parallel</code>.</li> <li>Package installs \u2013 Homebrew (<code>brew install cjsh</code>) and Arch AUR (<code>cjsh</code>) are maintained.</li> </ul> <p>For installation walkthroughs, see Quick Start. For the interactive feature matrix, continue to the Editing and POSIX+ Interactive Features documents.</p>"},{"location":"reference/hooks/","title":"Hooks","text":""},{"location":"reference/hooks/#shell-hooks","title":"Shell Hooks","text":"<p>CJ's Shell provides a lightweight hook system that allows you to execute custom shell functions at key points in the shell's lifecycle. This is similar to Zsh's hook system and enables powerful customizations without modifying the shell's core code.</p>"},{"location":"reference/hooks/#available-hook-types","title":"Available Hook Types","text":""},{"location":"reference/hooks/#precmd","title":"<code>precmd</code>","text":"<p>Executed before the prompt is displayed, after the previous command has completed.</p> <p>Use cases: - Update dynamic prompt elements - Display custom information before each prompt - Log command execution times - Update terminal title</p> <p>Example: </p><pre><code>function my_precmd() {\n    echo \"Last command finished at $(date)\"\n}\nhook add precmd my_precmd\n</code></pre><p></p>"},{"location":"reference/hooks/#preexec","title":"<code>preexec</code>","text":"<p>Executed after you press Enter but before the command is actually executed.</p> <p>Use cases: - Log commands before execution - Display command start time - Validate commands before running - Send notifications for long-running commands</p> <p>Example: </p><pre><code>function my_preexec() {\n    echo \"About to execute command...\"\n}\nhook add preexec my_preexec\n</code></pre><p></p>"},{"location":"reference/hooks/#chpwd","title":"<code>chpwd</code>","text":"<p>Executed after successfully changing directories with the <code>cd</code> command.</p> <p>Use cases: - Automatically activate virtual environments - Display directory-specific information - Update terminal title with current directory - Load directory-specific configurations</p> <p>Example: </p><pre><code>function my_chpwd() {\n    echo \"Changed to: $PWD\"\n    # Auto-activate Python virtual environment if it exists\n    if [ -f \".venv/bin/activate\" ]; then\n        source .venv/bin/activate\n    fi\n}\nhook add chpwd my_chpwd\n</code></pre><p></p>"},{"location":"reference/hooks/#hook-management-commands","title":"Hook Management Commands","text":""},{"location":"reference/hooks/#register-a-hook","title":"Register a Hook","text":"<pre><code>hook add &lt;hook_type&gt; &lt;function_name&gt;\n</code></pre> <p>Registers a shell function to be called at the specified hook point.</p> <p>Example: </p><pre><code>function greet() {\n    echo \"Hello from hook!\"\n}\nhook add precmd greet\n</code></pre><p></p>"},{"location":"reference/hooks/#remove-a-hook","title":"Remove a Hook","text":"<pre><code>hook remove &lt;hook_type&gt; &lt;function_name&gt;\n</code></pre> <p>Unregisters a previously registered hook function.</p> <p>Example: </p><pre><code>hook remove precmd greet\n</code></pre><p></p>"},{"location":"reference/hooks/#list-hooks","title":"List Hooks","text":"<pre><code>hook list [hook_type]\n</code></pre> <p>Lists all registered hooks. If <code>hook_type</code> is specified, only hooks of that type are shown.</p> <p>Examples: </p><pre><code># List all hooks\nhook list\n\n# List only precmd hooks\nhook list precmd\n</code></pre><p></p>"},{"location":"reference/hooks/#clear-all-hooks","title":"Clear All Hooks","text":"<pre><code>hook clear &lt;hook_type&gt;\n</code></pre> <p>Removes all hooks of the specified type.</p> <p>Example: </p><pre><code>hook clear precmd\n</code></pre><p></p>"},{"location":"reference/hooks/#complete-examples","title":"Complete Examples","text":""},{"location":"reference/hooks/#auto-activate-python-virtual-environments","title":"Auto-activate Python Virtual Environments","text":"<pre><code># In ~/.cjshrc\n\nfunction auto_venv() {\n    # Deactivate current venv if exists\n    if [ ! -z \"$VIRTUAL_ENV\" ]; then\n        deactivate 2&gt;/dev/null\n    fi\n\n    # Check for virtual environment in current directory\n    if [ -f \".venv/bin/activate\" ]; then\n        source .venv/bin/activate\n        echo \"\u2713 Activated Python virtual environment\"\n    elif [ -f \"venv/bin/activate\" ]; then\n        source venv/bin/activate\n        echo \"\u2713 Activated Python virtual environment\"\n    fi\n}\n\nhook add chpwd auto_venv\n</code></pre>"},{"location":"reference/hooks/#display-git-status-after-directory-change","title":"Display Git Status After Directory Change","text":"<pre><code># In ~/.cjshrc\n\nfunction git_status_on_cd() {\n    if git rev-parse --is-inside-work-tree &gt; /dev/null 2&gt;&amp;1; then\n        echo \"\"\n        git status -sb\n        echo \"\"\n    fi\n}\n\nhook add chpwd git_status_on_cd\n</code></pre>"},{"location":"reference/hooks/#log-all-commands","title":"Log All Commands","text":"<pre><code># In ~/.cjshrc\n\nfunction log_command() {\n    echo \"[$(date '+%Y-%m-%d %H:%M:%S')] $PWD\" &gt;&gt; ~/.cjsh_command_log\n}\n\nhook add preexec log_command\n</code></pre>"},{"location":"reference/hooks/#display-command-duration","title":"Display Command Duration","text":"<pre><code># In ~/.cjshrc\n\nfunction command_timer_start() {\n    COMMAND_START_TIME=$(date +%s)\n}\n\nfunction command_timer_end() {\n    if [ ! -z \"$COMMAND_START_TIME\" ]; then\n        local duration=$(($(date +%s) - COMMAND_START_TIME))\n        if [ $duration -gt 5 ]; then\n            echo \"\u23f1 Command took ${duration}s\"\n        fi\n        unset COMMAND_START_TIME\n    fi\n}\n\nhook add preexec command_timer_start\nhook add precmd command_timer_end\n</code></pre>"},{"location":"reference/hooks/#dynamic-terminal-title","title":"Dynamic Terminal Title","text":"<pre><code># In ~/.cjshrc\n\nfunction update_terminal_title() {\n    # Set terminal title to current directory\n    echo -ne \"\\033]0;${PWD/#$HOME/~}\\007\"\n}\n\nhook add precmd update_terminal_title\nhook add chpwd update_terminal_title\n</code></pre>"},{"location":"reference/hooks/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Keep hooks fast: Hooks are executed synchronously and can slow down your shell if they take too long.</p> </li> <li> <p>Handle errors gracefully: Hooks should not exit with error codes that affect subsequent commands.</p> </li> <li> <p>Use functions: Define hooks as shell functions for better organization and reusability.</p> </li> <li> <p>Avoid infinite loops: Be careful with hooks that might trigger themselves (e.g., <code>chpwd</code> that calls <code>cd</code>).</p> </li> <li> <p>Test hooks: Test your hooks in a separate shell session before adding them to <code>~/.cjshrc</code>.</p> </li> <li> <p>Document your hooks: Add comments to your <code>~/.cjshrc</code> explaining what each hook does.</p> </li> </ol>"},{"location":"reference/hooks/#debugging-hooks","title":"Debugging Hooks","text":"<p>To debug hook execution, you can temporarily add debugging output:</p> <pre><code>function my_hook() {\n    echo \"DEBUG: my_hook called\" &gt;&amp;2\n    # Your actual hook code here\n}\n</code></pre> <p>To disable a problematic hook without editing files:</p> <pre><code># In the shell\nhook remove precmd problematic_function\n</code></pre>"},{"location":"reference/hooks/#hook-execution-order","title":"Hook Execution Order","text":"<p>When multiple hooks of the same type are registered, they are executed in the order they were registered:</p> <pre><code>hook add precmd first_function\nhook add precmd second_function\nhook add precmd third_function\n\n# Execution order: first_function, second_function, third_function\n</code></pre>"},{"location":"reference/hooks/#differences-from-zsh-hooks","title":"Differences from Zsh Hooks","text":"<p>CJ's Shell hooks are inspired by Zsh but have some differences:</p> <ul> <li>Simpler API: Uses a single <code>hook</code> command instead of <code>add-zsh-hook</code></li> <li>Fewer hook types: Currently supports only <code>precmd</code>, <code>preexec</code>, and <code>chpwd</code></li> <li>No automatic unhooking: Functions are not automatically removed when undefined</li> <li>Manual management: No automatic hook discovery from function names</li> </ul>"},{"location":"reference/hooks/#configuration-file-example","title":"Configuration File Example","text":"<p>Here's a complete example of hook usage in <code>~/.cjshrc</code>:</p> <pre><code># ~/.cjshrc - CJ's Shell Configuration with Hooks\n\n# Function definitions\nfunction show_git_info() {\n    if git rev-parse --is-inside-work-tree &gt; /dev/null 2&gt;&amp;1; then\n        local branch=$(git branch --show-current)\n        echo \"Git branch: $branch\"\n    fi\n}\n\nfunction greet_directory() {\n    local dir=$(basename \"$PWD\")\n    echo \"\u2192 Entered: $dir\"\n}\n\nfunction check_todos() {\n    if [ -f \"TODO.md\" ]; then\n        echo \"This directory has a TODO.md file\"\n    fi\n}\n\n# Register hooks\nhook add chpwd show_git_info\nhook add chpwd greet_directory\nhook add chpwd check_todos\n\necho \"Hooks loaded successfully\"\n</code></pre>"},{"location":"reference/hooks/#see-also","title":"See Also","text":"<ul> <li>Built-in Commands Reference</li> <li>Configuration Guide</li> </ul>"},{"location":"reference/non-posix-features/","title":"Non-POSIX Features","text":""},{"location":"reference/non-posix-features/#posix-interactive-features","title":"POSIX+ Interactive Features","text":"<p>CJ's Shell aims to behave like <code>sh</code> when running scripts while offering an opinionated interactive experience that goes well beyond the POSIX specification. This document calls out the major non-POSIX features so you know what is different, how to tune it, and how to disable it when necessary.</p>"},{"location":"reference/non-posix-features/#prompt-system-visual-enhancements","title":"Prompt System &amp; Visual Enhancements","text":"<ul> <li>Markup-driven prompts \u2013 <code>PS1</code>, <code>RPS1</code>, and <code>PS2</code> accept BBCode-style markup. Tags such as   <code>[b]</code>, <code>[color=#ff69b4]</code>, <code>[ic-hint]</code>, and <code>[bgcolor=ansi-darkgray]</code> are specific to CJSH's   integration with the isocline editor.</li> <li>Prompt cleanup controls \u2013 <code>cjshopt prompt-cleanup*</code> toggles remove the previous prompt, insert   spacer lines, or truncate multiline prompts. These behaviors are not part of traditional POSIX   shells.</li> <li>Right-prompt cursor tracking \u2013 <code>cjshopt right-prompt-follow-cursor</code> lets the inline right   prompt move with the active cursor row, something stock POSIX shells do not support.</li> <li>Dynamic title line \u2013 The introductory banner and title-line management (enabled by default)   can be disabled with <code>--no-titleline</code> or <code>cjshopt login-startup-arg --no-titleline</code>.</li> </ul> <p>See Prompt Markup and Styling for the full markup reference.</p>"},{"location":"reference/non-posix-features/#interactive-editing-extensions","title":"Interactive Editing Extensions","text":"<ul> <li>Multiline editor \u2013 Automatic continuation detection, optional relative or absolute line   numbers, inline hints, and visible whitespace markers are provided by isocline and configured via   <code>cjshopt</code> commands (<code>multiline</code>, <code>line-numbers</code>, <code>hint</code>, <code>visible-whitespace</code>, etc.).</li> <li>Syntax highlighter \u2013 Real-time token classification and styling via <code>cjshopt style_def</code>.   Highlight categories such as <code>unknown-command</code>, <code>ic-linenumber-current</code>, and <code>ic-hint</code> are   non-standard.</li> <li>Key binding profiles \u2013 Vi/Emacs modes plus user-defined command bindings using   <code>cjshopt keybind</code> and <code>cjshopt keybind ext</code>.</li> <li>Fish-style abbreviations \u2013 <code>abbr</code> and <code>unabbr</code> provide inline text expansions, a feature not   present in POSIX shells.</li> </ul>"},{"location":"reference/non-posix-features/#posix-scripting-syntax","title":"POSIX+ Scripting Syntax","text":"<ul> <li>Brace expansion \u2013 Expand comma-separated terms or ranges before globbing.</li> <li>Example: <code>echo {alpha,beta}</code> \u2192 <code>alpha beta</code></li> <li>Here-strings \u2013 Feed a single string into a command's stdin.</li> <li>Example: <code>grep foo &lt;&lt;&lt; \"foo bar\"</code></li> <li>Process substitution \u2013 Treat command output/input as a file-like path.</li> <li>Example: <code>diff &lt;(sort a.txt) &lt;(sort b.txt)</code></li> </ul> <p>These syntax extensions are available in both scripts and interactive sessions. History expansion remains interactive-only by default; see the History section below.</p>"},{"location":"reference/non-posix-features/#completion-engine","title":"Completion Engine","text":"<ul> <li>Fuzzy matching and spell correction \u2013 Configurable through <code>cjshopt completion-case</code>,   <code>cjshopt completion-spell</code>, and <code>cjshopt completion-preview</code>.</li> <li>Man-page scraping \u2013 <code>generate-completions</code> and on-demand parsing of <code>man</code> pages populate a   cache under <code>~/.cache/cjsh/generated_completions/</code> for rich option and subcommand help.</li> <li>Inline preview pane &amp; source annotations \u2013 Completion menus display descriptions, origins   (history, PATH, builtin), and exit-status tags; these are CJSH-specific niceties.</li> </ul> <p>Consult the Completion Authoring Guide for cache format and customization tips.</p>"},{"location":"reference/non-posix-features/#command-enhancements","title":"Command Enhancements","text":"<ul> <li>Smart <code>cd</code> \u2013 <code>cd</code> falls back to fuzzy directory matching and prioritizes frequently visited   locations to speed up navigation.</li> <li><code>cjshopt</code> \u2013 A dedicated configuration builtin that sets editor behaviour, generates config   files, and manages key bindings/history limits. None of its subcommands exist in POSIX sh.</li> <li><code>cjsh-widget</code> \u2013 Exposes the line editor to shell scripts for advanced key-driven workflows.</li> <li><code>generate-completions</code> \u2013 Pre-warm the completion cache. A convenience command beyond POSIX.</li> <li><code>hook</code> \u2013 Lightweight precmd/preexec/chpwd hook management similar to zsh's hook system.</li> </ul>"},{"location":"reference/non-posix-features/#history-execution-utilities","title":"History &amp; Execution Utilities","text":"<ul> <li>History expansion \u2013 Bash-style tokens (<code>!!</code>, <code>!$</code>, <code>!^</code>, <code>^foo^bar</code>, etc.) work in interactive   mode. They automatically disable in script mode, <code>cjsh -c</code>, or when stdin is not a tty. Use   <code>--no-history-expansion</code> or <code>cjshopt login-startup-arg --no-history-expansion</code> to turn it off.</li> <li>Persistent exit codes \u2013 Each history entry records the command's exit status to enrich   completions and prompts.</li> <li>Fuzzy history case sensitivity \u2013 <code>cjshopt history-search-case</code> toggles whether the search menu   treats uppercase and lowercase entries as distinct (press <code>Alt+C</code> inside the menu to flip the   setting temporarily).</li> <li>Typeahead buffering \u2013 Key presses made while a command runs are replayed automatically once   the prompt returns.</li> </ul>"},{"location":"reference/non-posix-features/#additional-non-posix-behaviours","title":"Additional Non-POSIX Behaviours","text":"<ul> <li>Startup diagnostics \u2013 <code>--show-startup-time</code> prints the duration spent initializing CJSH.</li> <li>Secure mode \u2013 <code>--secure</code> skips all profile/rc/logout sourcing for hardened sessions and   ignores <code>PROMPT_COMMAND</code>.</li> <li>Auto-background on suspend \u2013 Append <code>&amp;^</code> to a command to resume it in the background when   you press <code>Ctrl+Z</code>. Append <code>&amp;^!</code> to resume it and discard stdout/stderr after the suspend so the   prompt stays clean.</li> <li>Extension-based script dispatch \u2013 When executing a script file without a shebang, CJSH can   infer the interpreter from the file extension (for example, <code>.sh</code> uses <code>sh</code>, <code>.bash</code> uses <code>bash</code>).   Disable with <code>--no-script-extension-interpreter</code> or <code>cjshopt script-extension-interpreter off</code>.</li> <li>Consistent error output \u2013 Interpreter failures now use the same compact <code>cjsh:</code> error_out   format as other builtins for predictable logs.</li> </ul>"},{"location":"reference/non-posix-features/#disabling-enhancements","title":"Disabling Enhancements","text":"<p>CJSH keeps POSIX-focused scripting predictable by disabling most POSIX+ features automatically in non-interactive contexts. When you need a strictly standard shell interactively, start with <code>--minimal</code> (disables colors, completions, syntax highlighting, rc sourcing, the title line, history expansion, multiline line numbers, and auto-indentation) and add <code>--secure</code> if you also want to skip all login/logout dotfiles:</p> <pre><code>cjsh --minimal --secure\n</code></pre> <p>Or persist equivalent flags through <code>cjshopt login-startup-arg</code> in <code>~/.cjprofile</code>.</p>"},{"location":"reference/non-posix-features/#summary","title":"Summary","text":"<ul> <li>Prompt markup, cleanup toggles, and syntax styling provide rich visual customization beyond POSIX.</li> <li>The isocline editor delivers multiline editing, hints, completions, abbreviations, and keymap   control.</li> <li>Builtins such as <code>cjshopt</code>, <code>generate-completions</code>, <code>hook</code>, and <code>cjsh-widget</code> extend the shell's   capabilities.</li> <li>History expansion, typeahead buffering, and persistent exit codes streamline interactive work.</li> </ul> <p>Each enhancement is optional and either automatically disabled outside of interactive mode or controllable through command-line flags and <code>cjshopt</code> commands, allowing you to match the behaviour you need for any environment.</p>"},{"location":"themes/thedetails/","title":"The Details","text":""},{"location":"themes/thedetails/#prompt-markup-and-styling","title":"Prompt Markup and Styling","text":"<p>CJ's Shell no longer relies on an external theme DSL. Prompt styling is handled directly through the standard shell prompt variables (<code>PS1</code>, <code>RPS1</code>/<code>RPROMPT</code>, and <code>PROMPT_COMMAND</code>) combined with inline BBCode-style markup. This page explains how the markup works, which escape sequences are available, and how to persist your preferred prompt layout.</p>"},{"location":"themes/thedetails/#quick-start","title":"Quick Start","text":"<ul> <li>Set <code>PS1</code> to control the primary prompt. The default template now mirrors the classic Robby Russell   oh-my-zsh theme:   <pre><code>PS1='\\S  [color=#5fd7ff]\\W[/color] \\g'\n</code></pre></li> <li>Set <code>RPS1</code> (or <code>RPROMPT</code>) to control the right-aligned prompt. It is unset by default, so nothing   renders on the right until you export one.</li> <li>Use <code>PROMPT_COMMAND</code> for commands that should run before each prompt.</li> <li>Apply markup directly inside these variables to style text, add colors, and align sections.</li> </ul> <pre><code>export PS1='[b hotpink]\\u[/b] in [color=#87ceeb]\\w[/color]\\n$ '\nexport RPS1='[dim]\\A[/dim]'\nexport PROMPT_COMMAND='__update_git_info'\n</code></pre> <p>Markup is parsed by the isocline line editor. Invalid tags are ignored; run with <code>ISOCLINE_BBCODE_DEBUG=1</code> to print debugging information if you are experimenting.</p>"},{"location":"themes/thedetails/#markup-building-blocks","title":"Markup Building Blocks","text":""},{"location":"themes/thedetails/#inline-tags","title":"Inline Tags","text":"<ul> <li><code>[b]\u2026[/b]</code> \u2013 bold text</li> <li><code>[i]\u2026[/i]</code> \u2013 italics</li> <li><code>[u]\u2026[/u]</code> \u2013 underline</li> <li><code>[r]\u2026[/r]</code> \u2013 reverse video</li> <li><code>[dim]\u2026[/dim]</code>, <code>[strike]\u2026[/strike]</code>, <code>[blink]\u2026[/blink]</code>, <code>[hidden]\u2026[/hidden]</code></li> <li><code>[color=&lt;name|#RRGGBB&gt;]\u2026[/color]</code> \u2013 foreground color</li> <li><code>[bgcolor=&lt;name|#RRGGBB&gt;]\u2026[/bgcolor]</code> \u2013 background color</li> <li><code>underline-color=&lt;name|#RRGGBB&gt;</code> or <code>ansi-underline-color=&lt;idx&gt;</code> \u2013 attribute value that recolors   just the underline stroke (combine with any tag, e.g. <code>[u underline-color=#ffaa00]...[/u]</code>)</li> <li><code>[ansi-sgr=sequence]\u2026[/]</code> \u2013 inject raw SGR codes (advanced)</li> <li><code>[width=columns;&lt;align&gt;;&lt;fill&gt;;dots]\u2026[/]</code> \u2013 restrict content width (align is <code>left|center|right</code>)</li> </ul> <p>Color names include the full HTML color table plus <code>ansi-</code> variants such as <code>ansi-red</code>, <code>ansi-lightgray</code>, and <code>ansi-teal</code>. Hex values (<code>#ff69b4</code>) are also supported.</p> <p>Tag attributes can be combined inline: <code>[b color=hotpink]\u2026[/]</code> applies both bold and the color.</p>"},{"location":"themes/thedetails/#named-styles","title":"Named Styles","text":"<p>The syntax highlighter exposes reusable style names that can be used as tags. The defaults come from <code>token_constants::default_styles</code> and include:</p> <pre><code>unknown-command  colon  path-exists  path-not-exists\nglob-pattern     operator  keyword  builtin  system\nvariable         assignment-value  string  comment\ncommand-substitution  arithmetic  option  number\nfunction-definition  history-expansion\nic-prompt  ic-hint  ic-error  ic-info  ic-emphasis\nic-source  ic-diminish  ic-bracematch  ic-whitespace-char\nic-linenumbers  ic-linenumber-current\n</code></pre> <p>Use them as simple tags: <code>[ic-hint]\u231b[/ic-hint]</code>. Redefine a style with <code>cjshopt style_def &lt;name&gt; &lt;style&gt;</code> to change both the syntax highlighter and any markup that uses that tag.</p>"},{"location":"themes/thedetails/#closing-tags","title":"Closing Tags","text":"<p>Use <code>[/tag]</code> to end a specific style or <code>[/]</code> to end the most recent open tag. You can also nest tags freely; the parser keeps a stack so <code>[b][color=hotpink]...[/color][/b]</code> works as expected.</p>"},{"location":"themes/thedetails/#prompt-escape-sequences","title":"Prompt Escape Sequences","text":"<p>Prompt templates use familiar POSIX/Bash escapes. CJ's Shell expands the following sequences:</p> <ul> <li><code>\\a</code> bell character</li> <li><code>\\d</code> locale-specific date (e.g., <code>Tue Mar 04</code>)</li> <li><code>\\D{fmt}</code> date formatted with <code>strftime</code></li> <li><code>\\e</code> / <code>\\E</code> escape character (<code>\\033</code>)</li> <li><code>\\h</code> short hostname, <code>\\H</code> full hostname</li> <li><code>\\j</code> number of background jobs</li> <li><code>\\l</code> current tty</li> <li><code>\\n</code> newline, <code>\\r</code> carriage return</li> <li><code>\\s</code> shell name (<code>cjsh</code> by default)</li> <li><code>\\t</code> current time <code>HH:MM:SS</code>, <code>\\T</code> 12-hour, <code>\\@</code> 12-hour + AM/PM, <code>\\A</code> <code>HH:MM</code></li> <li><code>\\u</code> username</li> <li><code>\\v</code> short cjsh version, <code>\\V</code> full version string</li> <li><code>\\w</code> working directory with <code>$HOME</code> shortened to <code>~</code>, <code>\\W</code> basename of working directory</li> <li><code>\\S</code> status arrow used by the default theme (green when <code>$?</code> is zero, red otherwise)</li> <li><code>\\g</code> Git segment that renders <code>git:(branch)</code> plus a dirty marker; empty outside Git repos</li> <li><code>\\$</code> <code>#</code> for root, otherwise <code>$</code></li> <li><code>\\?</code> exit status of last command</li> <li><code>\\\\</code> literal backslash, <code>\\[</code> and <code>\\]</code> for zero-width control regions</li> <li>Octal escapes (<code>\\033</code>) for arbitrary characters</li> </ul> <p>All escape processing happens before markup is interpreted.</p>"},{"location":"themes/thedetails/#right-aligned-prompt-and-continuation-lines","title":"Right-Aligned Prompt and Continuation Lines","text":"<ul> <li><code>RPS1</code> (preferred) or <code>RPROMPT</code> controls the inline right prompt. Markup and escapes work the   same way as <code>PS1</code>.</li> <li><code>PS2</code> is used automatically for continuation lines by the line editor. Set it if you want a   custom secondary prompt, e.g. <code>export PS2='[dim]&gt; [/dim]'</code>.</li> <li><code>PROMPT_COMMAND</code>, when set, runs before CJ's Shell generates <code>PS1</code>/<code>RPS1</code>. Use it to refresh   environment variables, collect Git metadata, or update the terminal title.</li> </ul>"},{"location":"themes/thedetails/#prompt-cleanup-and-layout-options","title":"Prompt Cleanup and Layout Options","text":"<p>Use <code>cjshopt</code> to control how the prompt behaves after command execution:</p> <pre><code>cjshopt prompt-cleanup on|off|status          # Remove the previous prompt when you press Enter\ncjshopt prompt-cleanup-newline on|off|status  # Insert a blank line before the next prompt\ncjshopt prompt-cleanup-empty-line on|off      # Emit an extra spacer line during cleanup\ncjshopt prompt-cleanup-truncate on|off        # Collapse multiline prompts to a single line\ncjshopt prompt-newline on|off                 # Always print a blank line after commands\ncjshopt right-prompt-follow-cursor on|off     # Make the inline right prompt follow the cursor row\n</code></pre> <p>Each toggle prints guidance on how to persist the setting. Add the chosen command to <code>~/.cjshrc</code> to make it stick.</p>"},{"location":"themes/thedetails/#examples","title":"Examples","text":"<pre><code># Minimal prompt that still highlights errors\nexport PS1='[ic-error]\\$[/ic-error] '\n\n# Git-aware prompt via PROMPT_COMMAND\nprompt_git_info() {\n  if git rev-parse --is-inside-work-tree &gt;/dev/null 2&gt;&amp;1; then\n    local branch\n    branch=$(git branch --show-current 2&gt;/dev/null)\n    export GIT_SEG=\"[color=gold](${branch:-detached})[/color] \"\n  else\n    unset GIT_SEG\n  fi\n}\nexport PROMPT_COMMAND=prompt_git_info\nexport PS1='[b]\\u[/b] [color=#6cb6ff]\\w[/color] ${GIT_SEG}\\$ '\n\n# Right prompt that shows the time and exit code when non-zero\nexport RPS1='[dim]\\A[/dim][if $?&gt;0][space][ic-error]\u2717 $?[ic-error][/if]'\n</code></pre> <p>The last example demonstrates mixing markup with shell substitutions. Because prompt evaluation occurs inside CJ's Shell, you can use regular shell parameter expansion to build dynamic strings before markup is parsed.</p>"},{"location":"themes/thedetails/#persisting-configuration","title":"Persisting Configuration","text":"<ul> <li>Add <code>export</code> statements to <code>~/.cjshrc</code> for prompt variables.</li> <li>Use <code>cjshopt style_def</code> in the same file to adjust highlight palettes.</li> <li>When creating configuration files through <code>cjshopt generate-rc</code> or <code>cjshopt generate-profile</code>,   you can drop your prompt definitions into the generated files directly.</li> </ul> <p>That is all you need to theme CJ's Shell now\u2014no external DSL, no extra tooling. Compose the prompt you want with markup, save it in your rc files, and CJSH will handle the rest.</p>"}]}